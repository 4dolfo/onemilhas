<div id="customer_page" class="page page-table contention" data-ng-controller="CustomerCtrl">

    <section class="panel panel-default table-dynamic" ng-show="isTable && !mail">
        <div class="panel-heading"><strong></span> Clientes </strong></div>

        <div class="table-filters">
            <div class="row">
                <form>
                    <div class="form-group">
                        <div class="col-sm-6">
                            <input type="text"
                                   placeholder="Pesquisar..."
                                   class="form-control"
                                   data-ng-model="searchKeywords"
                                   data-ng-model-options="{ debounce: 500 }"
                                   data-ng-change="loadClient()">
                        </div>
                        <div class="col-sm-2">
                            <script type="text/ng-template" id="ClientsModalDemoCtrl.html">
                                <div class="modal-header">
                                    <h3>Pesquisa Avaçada</h3>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="form-group">
                                            <label for="" class="col-sm-4">Status</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" ng-model="filter.status" typeahead="status for status in clientStatus | filter:$viewValue | limitTo:8" placeholder="Pesquisar" >
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="" class="col-sm-4">Forma Pagamento</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" ng-model="filter.paymentType" typeahead="status for status in clientPayments | filter:$viewValue | limitTo:8" placeholder="Pesquisar" >
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary" ng-click="ok();">OK</button>
                                    <button class="btn btn-warning" ng-click="cancel();">Cancel</button>
                                </div>
                            </script>
                            <button class="btn btn-default" ng-click="openModalSearch()"><span class="glyphicon glyphicon-search"></span> Pesquisa Avançada</button>
                        </div>
                        <div class="col-md-2">
                          <a href="#/billsReceive/billet" class="btn btn-line-info">  Borderos / Boletos</a>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-primary" ng-click="print(true)"><span class="glyphicon glyphicon-multifunction-printer"></span> Imprimir Relatório</button>
                        </div>
                        <div class="col-sm-2" data-ng-controller="CustomerLogModalCtrl">
                            <script type="text/ng-template" id="CustomerLogModalCtrl.html">
                                <div class="modal-header">
                                    <h3>Informar motivos para alterações</h3>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="form-group">
                                          <textarea type="text" class="form-control" ng-model="selected.resolveDescription"/>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancel</button>
                                    <button type="button" class="btn btn-info" ng-click="save();">Salvar</button>
                                </div>
                            </script>
                        </div>
                        <div class="col-sm-2" data-ng-controller="CustomerStatusLogModalCtrl">
                            <script type="text/ng-template" id="CustomerStatusLogModal.html">
                                <div class="modal-header">
                                    <h3>Informar motivos para alterações</h3>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="form-group">
                                          <textarea type="text" class="form-control" ng-model="selected.resolveDescription"/>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancel</button>
                                    <button type="button" class="btn btn-info" ng-click="save();">Salvar</button>
                                </div>
                            </script>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <table class="table table-bordered table-striped table-responsive" name="table_client">
            <thead>
                <tr>
                    <th><div class="th">
                        ID
                        <span class="fa fa-angle-up"
                              data-ng-click=" order('id') "
                              data-ng-class="{active: row == 'id'}"></span>
                        <span class="fa fa-angle-down"
                              data-ng-click=" order('-id') "
                              data-ng-class="{active: row == '-id'}"></span>
                    </div></th>
                    <th><div class="th">
                        Nome
                        <span class="fa fa-angle-up"
                              data-ng-click=" order('name') "
                              data-ng-class="{active: row == 'name'}"></span>
                        <span class="fa fa-angle-down"
                              data-ng-click=" order('-name') "
                              data-ng-class="{active: row == '-name'}"></span>
                    </div></th>
                    <th><div class="th">
                        Prazo
                        <span class="fa fa-angle-up"
                              data-ng-click=" order('paymentType') "
                              data-ng-class="{active: row == 'paymentType'}"></span>
                        <span class="fa fa-angle-down"
                              data-ng-click=" order('-paymentType') "
                              data-ng-class="{active: row == '-paymentType'}"></span>
                    </div></th>
                    <th><div class="th">
                        Multa
                        <span class="fa fa-angle-up"
                              data-ng-click=" order('mulct') "
                              data-ng-class="{active: row == 'mulct'}"></span>
                        <span class="fa fa-angle-down"
                              data-ng-click=" order('-mulct') "
                              data-ng-class="{active: row == '-mulct'}"></span>
                    </div></th>
                    <th><div class="th">
                        Email
                        <span class="fa fa-angle-up"
                              data-ng-click=" order('email') "
                              data-ng-class="{active: row == 'email'}"></span>
                        <span class="fa fa-angle-down"
                              data-ng-click=" order('-email') "
                              data-ng-class="{active: row == '-email'}"></span>
                    </div></th>
                    <th><div class="th">
                        Telefone
                        <span class="fa fa-angle-up"
                              data-ng-click=" order('phoneNumber') "
                              data-ng-class="{active: row == 'phoneNumber'}"></span>
                        <span class="fa fa-angle-down"
                              data-ng-click=" order('-phoneNumber') "
                              data-ng-class="{active: row == '-phoneNumber'}"></span>
                    </div></th>
                    <th><div class="th">
                        Status
                        <span class="fa fa-angle-up"
                              data-ng-click=" order('status') "
                              data-ng-class="{active: row == 'status'}"></span>
                        <span class="fa fa-angle-down"
                              data-ng-click=" order('-status') "
                              data-ng-class="{active: row == '-status'}"></span>
                    </div></th>
                    <th><div class="th">
                        Enviar Email
                    </div></th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="client in clients">
                    <td ng-click="setSelected();">{{client.id}}</td>
                    <td ng-click="setSelected();">{{client.name}}<div ng-show="client.billingPeriod =='Mensal' || client.billingPeriod =='Quinzenal' "><span class="{{getTag(client)}}">   {{client.billingPeriod}}</span></div>
                        <br>
                        <div data-ng-controller="BillingRecordModalCtrl">
                            <script type="text/ng-template" id="BillingRecordModalCtrl.html">
                                <div class="modal-header">
                                    <h3>Registro de cobrança</h3>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <textarea type="text" class="form-control" ng-model="billing.description"/>
                                        <div class="form-group">
                                        </div>
                                        <div class="form-group" ng-repeat="record in billingRecord">
                                            <div class="col-sm-2">
                                                <label>{{findDate(record.issue_date) | date:'dd/MM/yyyy'}}<br>{{findDate(record.issue_date) | date:'HH:mm:ss'}}</label>
                                            </div>
                                            <div class="col-sm-2">
                                                <label>{{record.user}}</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <textarea type="text" class="form-control" ng-model="record.description" disabled/>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-warning" ng-click="cancel()">Cancelar</button>
                                    <button class="btn btn-info" ng-click="ok()">Registrar</button>
                                </div>
                            </script>
                            <button class="btn btn-info smallBtn" ng-click="$event.stopPropagation(); open();">Registrar andamento</button>
                        </div>
                    </td>
                    <td ng-click="setSelected();">{{client.paymentType}} - {{client.paymentDays}}</td>
                    <td ng-click="setSelected();"><span class="{{getTag(client)}}">{{client.mulct}}</span></td>
                    <td ng-click="setSelected();">{{client.email}}</td>
                    <td ng-click="setSelected();">{{client.phoneNumber}} / {{client.phoneNumber2}} / {{client.phoneNumber3}}</td>
                    <td>{{client.status}}
                        <label class="switch">
                        <input ng-click="intencionToChangeStatus(client);" type="checkbox" ng-checked="client.status =='Bloqueado' "><i></i></label>
                    </td>
                    <td><button type="button" class="btn btn-info smallBtn" ng-click="fillEmailContent(); $event.stopPropagation();"><span class="glyphicon glyphicon-envelope"></span>  E-mail</button></td>
                </tr>
            </tbody>
        </table>

        <footer class="table-footer">
            <div class="row">
                <div class="col-md-3 page-num-info">
                    <span>
                        Show 
                        <select data-ng-model="numPerPage"
                                data-ng-options="num for num in numPerPageOpt"
                                data-ng-change="onNumPerPageChange()">
                        </select> 
                        entries per page
                    </span>
                </div>
                <div class="col-md-5 pagination-container">
                    <pagination class="pagination-sm"
                                ng-model="currentPage"
                                total-items="totalData"
                                max-size="4"
                                ng-change="select(currentPage)"
                                items-per-page="numPerPage"
                                rotate="false"
                                previous-text="&lsaquo;" next-text="&rsaquo;"
                                boundary-links="true"></pagination>
                </div>
                <div class="col-md-4 text-right page-num-info">
                    <span>
                        Showing {{clients.length}}/{{totalData}} entries
                    </span>              
                </div>
            </div>
        </footer>
    </section>

    <!-- Input -->
    <section class="panel panel-default" ng-hide="isTable || mail">
        <div class="panel-heading"><strong>Cliente</strong></div>
        <div class="panel-body">
            <div class="divider"></div>
            <div class="ui-tab-container">
                <tabset justified="true" class="ui-tab">
                    <tab heading="Dados do Cliente">
                        <form class="form-horizontal" name="form_client">
                            <div class="form-group">
                                <label for="" class="col-sm-12">DADOS CLIENTE</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Nome</label>
                                <div class="col-sm-5">
                                    <input type="text" ng-model="selected.name" class="form-control" id="name" required>
                                </div>
                                <label for="label-focus" class="col-sm-1">CPF/CNPJ</label>
                                <div class="col-sm-5">
                                    <input type="text" ng-model="selected.registrationCode" class="form-control" id="registrationCode" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="label-focus" class="col-sm-1">Razao Social</label>
                                <div class="col-sm-5">
                                    <input type="text" ng-model="selected.company_name" class="form-control" required>
                                </div>

                                <label for="label-focus" class="col-sm-1">Tipo Sociedade</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.typeSociety" class="form-control" required>
                                </div>

                                <label for="" class="col-sm-1">Data Fundação</label>
                                <div class="col-sm-2">
                                    <input type="date" class="form-control" ng-model="selected.birthdate">
                                </div>
                            </div>
                            <div class="form-group"><br>
                                <label for="" class="col-sm-12">DADOS LOCALIZAÇÂO</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Endereço</label>
                                <div class="col-sm-8">
                                    <input type="text" ng-model="selected.adress" class="form-control" id="adress">
                                </div>

                                <label for="" class="col-sm-1">Número</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.adressNumber" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Complemento</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.adressComplement" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">Bairro</label>
                                <div class="col-sm-5">
                                    <input type="text" ng-model="selected.adressDistrict" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">CEP</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.zipCode" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Estado</label>
                                <div class="col-sm-3">
                                    <input id='clientstate' type="text" ng-model="selected.state" typeahead="state.state for state in states | filter:$viewValue | limitTo:8" class="form-control" placeholder="Pesquisar">
                                </div>

                                <label for="" class="col-sm-1">Municipio</label>
                                <div class="col-sm-7">
                                    <input type="text" ng-model="selected.city" typeahead="city.name for city in cities | filter:$viewValue | limitTo:8" class="form-control" placeholder="Pesquisar">
                                </div>
                            </div>
                            <div class="form-group"><br>
                                <label for="" class="col-sm-12">DADOS LOCALIZAÇÂO CNPJ</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Endereço</label>
                                <div class="col-sm-8">
                                    <input type="text" ng-model="selected.adressFinnancial" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">Número</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.adressNumberFinnancial" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Complemento</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.adressComplementFinnancial" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">Bairro</label>
                                <div class="col-sm-5">
                                    <input type="text" ng-model="selected.adressDistrictFinnancial" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">CEP</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.zipCodeFinnancial" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Estado</label>
                                <div class="col-sm-3">
                                    <input id='clientstatefinnancial' type="text" ng-model="selected.cityFinnancialState" typeahead="state.state for state in states | filter:$viewValue | limitTo:8" class="form-control" placeholder="Pesquisar">
                                </div>

                                <label for="" class="col-sm-1">Municipio</label>
                                <div class="col-sm-7">
                                    <input type="text" ng-model="selected.cityFinnancialName" typeahead="city.name for city in citiesFinnancial | filter:$viewValue | limitTo:8" class="form-control" placeholder="Pesquisar">
                                </div>
                            </div>
                            <div class="form-group"><br>
                                <label for="" class="col-sm-12">DADOS CONTATO</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Telefone Celular</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" id="phonenumber" ng-model="selected.phoneNumber" required>
                                </div>

                                <label for="" class="col-sm-1">Telefone Comercial</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" id="phoneNumber2" ng-model="selected.phoneNumber2">
                                </div>

                                <label for="" class="col-sm-1">Telefone Residencial</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" id="phoneNumber3" ng-model="selected.phoneNumber3">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Email</label>
                                <div class="col-sm-7">
                                    <input type="text" ng-model="selected.email" class="form-control ng-valid-email" required>
                                </div>

                                <label for="" class="col-sm-1">Data Registro</label>
                                <div class="col-sm-2">
                                    <input type="date" class="form-control" ng-model="selected.registerDate">
                                </div>
                            </div><br />
                            <div class="form-group"><br>
                                <label for="" class="col-sm-12">DADOS FINANCEIRO</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4">Status
                                <span class="ui-select">
                                    <select ng-model="selected.status" ng-change="clientModify('status')">
                                        <option class="form-control" ng-repeat="status in clientStatus" value="{{status}}">{{status}}</option>
                                    </select>
                                </span></label>

                                <label for="" class="col-sm-3">Faturamento
                                <span class="ui-select" ng-if="showBillingPeriod()">
                                    <select ng-model="selected.billingPeriod">
                                        <option class="form-control" ng-repeat="billing in clientBilling" value="{{billing}}">{{billing}}</option>
                                    </select>
                                </span></label>
                                <div class="col-sm-1" ng-show="selected.billingPeriod != 'Diario' && selected.billingPeriod != 'Semanal' && selected.billingPeriod != 'Quinzenal' && selected.billingPeriod != 'Mensal' ">
                                    <input type="text" ng-model="selected.billingPeriod" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">Multa atraso</label>
                                <div class="col-sm-1">
                                    <input type="number" ng-model="selected.mulct" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">Juros</label>
                                <div class="col-sm-1">
                                    <input type="number" ng-model="selected.interest" class="form-control">
                                </div>
                            </div><br />
                            <div>
                                <label for="" class="col-sm-3">Origem
                                <span class="ui-select">
                                    <select ng-model="selected.origin">
                                        <option class="form-control" ng-repeat="origin in origins" value="{{origin}}">{{origin}}</option>
                                    </select>
                                </span></label>

                                <div class="col-sm-3">
                                    <label class="switch" class="col-sm-1">Considerar rasão Social (Boleto)
                                        <input type="checkbox" ng-model="selected.bankSlipSocialName" ng-checked="selected.bankSlipSocialName"><i></i>
                                    </label>
                                </div>
                            </div><br />
                            <div class="form-group">
                                <label for="" class="col-sm-4">Forma de Pagamento  
                                <span class="ui-select">
                                    <select ng-model="selected.paymentType" ng-change="clientModify('pagamento')">
                                        <option class="form-control" ng-repeat="payment in clientPayments" value="{{payment}}">{{payment}}</option>
                                    </select>
                                </span></label>

                                <label for="" class="col-sm-1">Dias Pagamento</label>
                                <div class="col-sm-1">
                                    <input type="text" ng-model="selected.paymentDays" class="form-control" ng-change="clientModify('prazo')">
                                </div>

                                <div class="col-sm-2">
                                    <label class="switch" class="col-sm-1">Dias Úteis
                                        <input type="checkbox" ng-model="selected.workingDays" ng-checked="selected.workingDays"><i></i>
                                    </label>
                                </div>

                                <label for="" class="col-sm-1">Dias Pagamento 2</label>
                                <div class="col-sm-1">
                                    <input type="text" ng-model="selected.secondPaymentDays" class="form-control">
                                </div>

                                <div class="col-sm-2">
                                    <label class="switch" class="col-sm-1">Dias Úteis 2
                                        <input type="checkbox" ng-model="selected.secondWorkingDays" ng-checked="selected.secondWorkingDays"><i></i>
                                    </label>
                                </div>
                            </div><br />
                            <div class="form-group">
                                <label for="" class="col-sm-1">Responsavel Financeiro</label>
                                <div class="col-sm-5">
                                    <input type="text" ng-model="selected.financialContact" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">Emails Financeiro</label>
                                <div class="col-sm-5">
                                    <input type="text" ng-model="selected.finnancialEmail" class="form-control">
                                </div>
                            </div><br />
                            <div class="form-group"><br>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Limite Cliente</label>
                                <div class="col-sm-2">
                                    <input type="text" id="partner_limit" ng-model="selected.partnerLimit" class="form-control" ng-change="clientModify('limite')">
                                </div>

                                <label for="" class="col-sm-1">Margem de Limite</label>
                                <div class="col-sm-2">
                                    <input type="number" ng-model="selected.limitMargin" class="form-control">
                                </div>

                                <label for="" class="col-sm-1">Uso Atual</label>
                                <div class="col-sm-2">
                                    <input type="number" ng-model="ActualLimit.actual" class="form-control" disabled>
                                </div>

                                <label for="" class="col-sm-1">Limite total</label>
                                <div class="col-sm-2">
                                    <input type="number" ng-model="ActualLimit.limit" class="form-control" disabled>
                                </div>
                            </div>
                            <div class="form-group"><br>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Observações</label>
                                <div class="col-sm-11">
                                    <textarea type="text" class="form-control" ng-model="selected.description"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-1">Ultima emissão</label>
                                <div class="col-sm-3">
                                    <input type="datetime-local" placeholder="yyyy-MM-ddTHH:mm:ss" ng-model="selected.last_emission" class="form-control" disabled>
                                </div>
                                <label for="" class="col-sm-2">Quantidade de emissão(ultimo mês)</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.last_month_emission" class="form-control" disabled>
                                </div>
                                <label for="" class="col-sm-2">Quantidade de emissão(total)</label>
                                <div class="col-sm-2">
                                    <input type="text" ng-model="selected.countd" class="form-control" disabled>
                                </div>
                            </div>
                        </form>
                    </tab>
                    <tab heading="Análise de Crédito">
                        <form class="form-horizontal" name="form_analysisClient">
                            <div class="form-group">
                                <label for="" class="col-sm-5">Quantidade de bilhetes emitidos pelo Cliente: {{selected.countd}}</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-5">Quantidade de borderôs emitidos: {{finnacialInfo.billets}}</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-5">Quantidade de borderôs pagos antecipadamente ou em dia: {{finnacialInfo.anticipated}}</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-5">Quantidade de borderôs atrasados em ate 3 dias: {{finnacialInfo.god}}</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-5">Quantidade de borderôs atrasados em ate 7 dias: {{finnacialInfo.week}}</label>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-5">Quantidade de borderôs atrasados em mais de 7 dias: {{finnacialInfo.late}}</label>
                            </div>

                            <div class="form-group">
                                <label for="" class="col-sm-5">Analise SRM: {{checkOurAnalisys()}}</label>
                            </div>
                        </form>
                    </tab>
                    <tab heading="Dados dos Borderôs">
                        <form class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-6">
                                    <input type="text"
                                           placeholder="Pesquisar..."
                                           class="form-control"
                                           data-ng-model="searchBilletsClient"
                                           data-ng-keyup="searchBillets()">
                                </div>
                                <label for="" class="col-sm-12">Borderôs Abertos</label>
                                <table class="table table-bordered table-striped table-responsive">
                                    <thead>
                                        <tr>
                                            <th><div class="th">Data
                                            </div></th>
                                            <th><div class="th">Status
                                            </div></th>
                                            <th><div class="th">Valor
                                            </div></th>
                                            <th><div class="th">Vencimento
                                            </div></th>
                                            <th><div class="th">Nosso Numero
                                            </div></th>
                                            <th><div class="th">Pagamento
                                            </div></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr data-ng-repeat="billet in filteredBillets">
                                            <th>{{findDate(billet.issue_date) | date:'dd/MM/yyyy'}}</th>
                                            <th>{{getStatusDesc(billet.status)}}</th>
                                            <th class="text-right">R$ {{formatNumber(billet.actual_value)}}</th>
                                            <th>{{findDate(billet.due_date) | date:'dd/MM/yyyy'}}</th>
                                            <th>{{billet.ourNumber}}</th>
                                            <th>{{findDate(billet.payment_date) | date:'dd/MM/yyyy'}}</th>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </form>
                    </tab>
                    <!-- <tab heading="Charts">
                        <form class="form-horizontal">
                            <div class="form-group">
                                <div class="col-md-4">
                                    <section class="panel panel-default">
                                        <div class="panel-heading"><strong><span>Boletos Gerados/Atrasados</span></strong></div>
                                        <div class="panel-body">
                                            <div data-flot-client-billets-chart
                                                 data-data="clientBillets"
                                                 data-options="options"
                                                 style="width: 100%; height: 300px;"
                                                 ></div>
                                        </div>
                                    </section> 
                                </div>

                            </div>                            
                        </form>
                    </tab> -->
                    <tab heading="Histórico">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="panel panel-profile">
                                        <ul ng-repeat="log in ClientLog" class="list-unstyled list-info">
                                            <li>
                                                <label>{{findDate(log.issue_date) | date:'dd/MM/yyyy HH:mm:ss'}}</label>
                                                <label>{{log.userName}}</label>
                                                <div ng-bind-html="log.description"></div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <form class="form-horizontal">
                            <div class="form-group">
                                <label for="" class="col-sm-2">Descrição</label>
                                <div class="col-sm-10">
                                    <textarea type="text" class="form-control" ng-model="newProgress.description" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-8">
                                    <button type="button" class="btn btn-info" ng-click="registerLog();">Registrar Andamento</button>
                                </div>
                            </div>
                        </form>
                    </tab>
                    <tab heading="Andamento de Cobranças">
                        <form class="form-horizontal">
                            <ul ng-repeat="log in billingRecord" class="list-unstyled list-info">
                                <li>
                                    <div class="col-sm-1">
                                        <label>Data: {{findDate(log.issue_date) | date:'dd/MM/yyyy'}}<br>{{findDate(log.issue_date) | date:'HH:mm:ss'}}</label>
                                    </div>
                                    <div class="col-sm-1">
                                        <label>Usuario: {{log.user}}</label>
                                    </div>
                                    <div class="col-sm-10">
                                        <textarea type="text" class="form-control" ng-model="log.description" disabled/>
                                    </div>
                                    <br><br>
                                </li>
                            </ul>
                        </form>
                    </tab>
                </tabset>
                <br />
                <div class="col-sm-6">
                    <button type="button" class="btn btn-warning" ng-click="cancelEdit();">cancelar</button>
                </div>
                <div class="col-sm-6 text-right">
                    <button type="button" class="btn btn-success" ng-click="intencionToSave()">Salvar</button>
                </div>
            </div>
        </div>
    </section>

    <section class="panel panel-default mail-container mail-compose" ng-show="mail" nv-file-drop="" uploader="uploader" filters="queueLimit, customFilter">
        <div class="panel-heading"><strong>Escrever Email</strong></div>
        <div class="panel-body">
            <form class="form-horizontal">
                <div class="form-group">
                    <label for="mail_to" class="col-xs-2">Para:</label>
                    <div class="col-xs-10">
                        <input type="text" ng-model="partner.emailpartner" id="mail_to" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="mail_cc" class="col-xs-2">CC:</label>
                    <div class="col-xs-10">
                        <input type="text" id="mail_cc" ng-model="partner.mailcc" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="mail_subject" class="col-xs-2">Assunto:</label>
                    <div class="col-xs-10">
                        <input type="text" id="mail_subject" ng-model="partner.subject" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                  <div class="col-sm-4">
                      <table class="table">
                        <thead>
                            <tr>
                                <td>Name</td>
                                <td>Remover</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in uploader.queue">
                                <td><strong>{{ item.file.name }}</strong></td>
                                <td><button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                    <span class="glyphicon glyphicon-trash"></span> Remove
                                </button></td>
                            </tr>
                        </tbody>
                    </table>
                  </div>
                </div>
                <input type="file" nv-file-select uploader="uploader" multiple /><br/>
                <div class="well my-drop-zone" nv-file-over="" uploader="uploader">
                  Arraste e solte
                </div>
                <div text-angular ng-model="partner.emailContent" ng-class="ui-editor">
                </div>
            </form>
            <div class="mail-actions">
                <div class="text-left col-sm-6">
                    <button type="button" class="btn btn-warning" ng-click="cancelEdit();">cancelar</button>
                </div>
                <div class="text-right col-sm-6">
                    <button type="button" ng-click="mailOrder();" class="btn btn-primary">enviar</button>
                </div>
            </div>
        </div>
    </section>
    <!-- end Input -->
</div>