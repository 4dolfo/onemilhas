<div id="online_page" class="page page-table contention" data-ng-controller="OnlineOrderCtrl">

    <section class="panel panel-default table-dynamic" ng-show="tabindex == 0">
        <div class="panel-heading">
            <strong>Pedidos Online</strong> - Milhas Filtradas: {{findMilesOrder();}}</div>

        <div class="table-filters">
            <div class="row">
                <form>
                    <div class="form-group">
                        <div class="col-sm-5">
                            <input type="text" placeholder="Pesquisar..." class="form-control" data-ng-model="searchKeywords" data-ng-model-options='{ debounce: 1000 }'
                                data-ng-change="loadOnlineOrder()">
                        </div>
                        <div class="col-sm-2" ng-if="main.isMaster || !main.commercial">
                            <script type="text/ng-template" id="ModalCtrl.html">
                                <div class="modal-header">
                                    <h3>Pesquisa Avaçada</h3>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="form-group">
                                            <label for="" class="col-sm-4">Status</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" ng-model="filter.status" typeahead="status for status in saleStatus | filter:$viewValue | limitTo:8" placeholder="Pesquisar" >
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="" class="col-sm-12">Data Pedido</label>
                                        </div>
                                        <div class="form-group">
                                            <label for="" class="col-sm-4">De</label>
                                            <div class="col-sm-8">
                                                <div class="input-group ui-datepicker">
                                                    <input type="date" 
                                                        id='saleboardingDateFrom'
                                                        ng-model="filter.issueDateFrom"
                                                        class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="" class="col-sm-4">Até</label>
                                            <div class="col-sm-8">
                                                <div class="input-group ui-datepicker">
                                                    <input type="date" 
                                                        id='saleboardingDateTo'
                                                        ng-model="filter.issueDateTo"
                                                        class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" ng-click="ok();">OK</button>
                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancel</button>
                                </div>
                            </script>
                            <button class="btn btn-default" ng-click="openSearchModal()">
                                <span class="glyphicon glyphicon-search"></span> Pesquisa Avançada</button>
                        </div>
                        <div class="col-sm-1" data-ng-controller="OnlineModalPermissionCtrl">
                            <script type="text/ng-template" id="OnlineModalPermissionCtrl.html">
                                <div class="modal-header">
                                    <h3>Autorização de OP</h3>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="form-group">
                                            <label for="" class="col-sm-4">PIN</label>
                                            <div class="col-sm-4">
                                            <input type="password" class="form-control" ng-model="permissions.pinCode">
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="!permissions.type">
                                            <div class="col-sm-4">
                                            <button type="button" class="btn btn-primary" ng-click="check();">Confirmar</button>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="permissions.type == 'Comercial'">
                                            <div class="col-sm-4">
                                            <button type="button" class="btn btn-primary" ng-click="checkCommercial();">Confirmar Comercial</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancel</button>
                                    <button type="button" class="btn btn-info" ng-click="email();">Enviar Email</button>
                                    <button type="button" class="btn btn-info" ng-click="emailCommecial();" ng-show="response.partner_limit == 'true' ">Email p/ Comercial</button>
                                </div>
                            </script>
                        </div>
                        <div class="col-sm-2">Atualização Automatica
                            <label class="switch">
                                <input type="checkbox" ng-model="atualizations" ng-checked="atualizations">
                                <i></i>
                            </label>
                        </div>
                        <div class="col-sm-2">Timeout de Cards Travados
                            <label class="switch">
                                <input type="checkbox" ng-model="watchDogSelected" ng-checked="watchDogSelected" ng-click="watchDogCards()">
                                <i></i>
                            </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <table class="table table-bordered table-responsive">
            <thead>
                <tr>
                    <th>
                        <div class="th">
                            ID
                            <span class="fa fa-angle-up" data-ng-click="order('id') " data-ng-class="{active: row == 'id'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-id') " data-ng-class="{active: row == '-id'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Cliente
                            <span class="fa fa-angle-up" data-ng-click="order('client_name') " data-ng-class="{active: row == 'client_name'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-client_name') " data-ng-class="{active: row == '-client_name'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Login
                            <span class="fa fa-angle-up" data-ng-click="order('client_login') " data-ng-class="{active: row == 'client_login'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-client_login') " data-ng-class="{active: row == '-client_login'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Status
                            <span class="fa fa-angle-up" data-ng-click="order('status') " data-ng-class="{active: row == 'status'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-status') " data-ng-class="{active: row == '-status'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Companhia
                            <span class="fa fa-angle-up" data-ng-click="order('airline') " data-ng-class="{active: row == 'airline'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-airline') " data-ng-class="{active: row == '-airline'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Criando em
                            <span class="fa fa-angle-up" data-ng-click="order('created_at') " data-ng-class="{active: row == 'created_at'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-created_at') " data-ng-class="{active: row == '-created_at'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Total Milhas
                            <span class="fa fa-angle-up" data-ng-click="order('miles_used') " data-ng-class="{active: row == 'miles_used'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-miles_used') " data-ng-class="{active: row == '-miles_used'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Valor Final
                            <span class="fa fa-angle-up" data-ng-click="order('total_cost') " data-ng-class="{active: row == 'total_cost'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-total_cost') " data-ng-class="{active: row == '-total_cost'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Observações
                            <span class="fa fa-angle-up" data-ng-click="order('comments') " data-ng-class="{active: row == 'comments'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-comments') " data-ng-class="{active: row == '-comments'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Situação
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="onlineorder in onlineorders" bgcolor='{{findColor(onlineorder);}}' class="draggable">
                    <td ng-click="setSelected(); $event.stopPropagation();">{{onlineorder.id}} / {{onlineorder.notificationCode}}</td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        {{onlineorder.client_name}}
                        <label class="label label-purple right" ng-if="isFlightToday(onlineorder)">Voo Hoje</label>
                        <label class="label label-purple right" ng-if="!isFlightToday(onlineorder) && isFlightTomorrow(onlineorder)">Voo Amanha</label>
                        <label class="label label-purple right" ng-if="isPriority(onlineorder)">Prioridade</label>
                        <label class="label label-danger right" ng-if="testGroup(onlineorder)">Grupo de Testes</label>
                        <br>
                        <b>{{onlineorder.userSession}}</b>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">{{onlineorder.client_login}}</td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        <div>
                            <span class="{{orderTagClient(onlineorder)}}">{{getStatusOrder(onlineorder)}}</span>
                        </div>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">{{onlineorder.airline}}</td>
                    <td ng-click="setSelected(); $event.stopPropagation();">{{findDate(onlineorder.created_at) | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                    <td ng-click="setSelected(); $event.stopPropagation();" >

                        <div ng-if="onlineorder.emissionMethodMiles && onlineorder.emissionMethodCompany">
                            <div class="text-right" ng-if="onlineorder.emissionMethodCompany == 2 ">Pagante</div>
                            <div class="text-right" ng-if="((onlineorder.emissionMethodCompany == 1 && onlineorder.emissionMethodMiles == 1) && onlineorder.idCompany > onlineorder.idMiles) ">
                                {{formatNumber(onlineorder.miles_used,0)}}/Pagante
                            </div>
                            <div class="text-right" ng-if="((onlineorder.emissionMethodCompany == 1 && onlineorder.emissionMethodMiles == 1) && onlineorder.idCompany < onlineorder.idMiles ) ">
                                Pagante/{{formatNumber(onlineorder.miles_used,0)}}
                            </div>
                            
                            <div class="text-right" ng-if="((onlineorder.emissionMethodMiles == 2) || (onlineorder.emissionMethodMiles == 1 && onlineorder.emissionMethodCompany == 0) || (onlineorder.emissionMethodMiles == 0 && onlineorder.emissionMethodCompany == 0))" >
                                {{formatNumber(onlineorder.miles_used,0)}}
                            </div>
                            
                        </div>
                        <div ng-if="!onlineorder.emissionMethodMiles || !onlineorder.emissionMethodCompany">
                            {{formatNumber(onlineorder.miles_used,0)}}
                        </div>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        <div ng-if="onlineorder.totalReal != 0" class="text-right">{{formatNumber(onlineorder.totalReal - onlineorder.cupom)}}</div>
                        <div ng-if="onlineorder.totalReal == 0" class="text-right">{{formatNumber(onlineorder.total_cost - onlineorder.cupom)}}</div>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">{{onlineorder.comments}}</td>
                    <td>
                        <button class="btn btn-default" ng-click="openStatusModal(onlineorder)">Opções</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <footer class="table-footer">
            <div class="row">
                <div class="col-md-4 page-num-info">
                    <span>
                        Show
                        <select data-ng-model="numPerPage" data-ng-options="num for num in numPerPageOpt" data-ng-change="loadOnlineOrder()">
                        </select>
                        entries per page
                    </span>
                </div>
                <div class="col-md-4 text-right pagination-container">
                    <pagination class="pagination-sm" ng-model="currentPage" total-items="totalData" max-size="4" ng-change="select(currentPage)"
                        items-per-page="numPerPage" rotate="false" previous-text="&lsaquo;" next-text="&rsaquo;" boundary-links="true"></pagination>
                </div>
                <div class="col-md-4 text-right page-num-info">
                    <span>
                        Showing {{onlineorders.length}}/{{totalData}} entries
                    </span>
                </div>
            </div>
        </footer>
    </section>

    <section class="panel panel-default table-dynamic" ng-show="tabindex == 1">
        <div class="panel-heading">
            <strong>Selecione o Cartão</strong>
        </div>
        <div class="table-filters">
            <div class="row">
                <form>
                    <div class="form-group">
                        <div class="col-sm-6">
                            <input type="text" placeholder="Pesquisar..." class="form-control"
                                data-ng-model="searchKeywordsMiles"
                                data-ng-model-options='{ debounce: 1000 }'
                                data-ng-change="loadOrderMilesFunction()">
                        </div>
                        <div class="col-sm-2">
                            <strong>QUANTIDADE DE PONTOS: {{formatNumber(flight_selected.miles_used,0)}}</strong>
                        </div>
                        <div class="col-sm-2">
                            <div>
                                <script type="text/ng-template" id="FindAllCardsCtrl.html">
                                    <div class="modal-header">
                                    <h3>Permissão</h3>
                                    </div>
                                    <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="form-group">
                                        <label for="" class="col-sm-4">PIN</label>
                                        <div class="col-sm-4">
                                            <input type="password" class="form-control" ng-model="flight_selected.pinCode">
                                        </div>
                                            <button type="button" class="btn btn-primary" ng-click="check();">Confirmar</button>
                                        </div>
                                    </form>
                                    </div>
                                    <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" ng-click="ok();">Confirmar</button>
                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancelar</button>
                                    </div>
                                </script>
                                <button type="button" class="btn btn-line-info smallBtn" ng-click="openFindAllCardsCtrl()">Buscar todos os Cartoes</button>
                            </div>
                        </div>
                        <div class="col-sm-2" ng-show="flight_selected.airline == 'LATAM' ">
                            <button type="button" class="btn btn-line-info smallBtn" ng-click="searchHighValueCards()">SOMENTE RED</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <table class="table table-bordered table-striped table-responsive">
            <thead>
                <tr>
                    <th>
                        <div class="th">
                            Fornecedor
                            <span class="fa fa-angle-up" data-ng-click="order_miles('name') " data-ng-class="{active: row == 'name'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('name') " data-ng-class="{active: row == '-name'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Cartão
                            <span class="fa fa-angle-up" data-ng-click="order_miles('card_number') " data-ng-class="{active: row == 'card_number'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('card_number') " data-ng-class="{active: row == '-card_number'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Companhia
                            <span class="fa fa-angle-up" data-ng-click="order_miles('airline') " data-ng-class="{active: row == 'airline'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('airline') " data-ng-class="{active: row == '-airline'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Tipo de Cartão
                            <span class="fa fa-angle-up" data-ng-click="order_miles('card_type') " data-ng-class="{active: row == 'card_type'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('card_type') " data-ng-class="{active: row == '-card_type'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Token
                            <span class="fa fa-angle-up" data-ng-click="order_miles('card_type') " data-ng-class="{active: row == 'card_type'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('card_type') " data-ng-class="{active: row == '-card_type'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">Chip
                            <span class="fa fa-angle-up" data-ng-click="order_miles('chip_number') " data-ng-class="{active: row == 'chip_number'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('chip_number') " data-ng-class="{active: row == '-chip_number'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th text-right">
                            Milhas
                            <span class="fa fa-angle-up" data-ng-click="order_miles('leftover') " data-ng-class="{active: row == 'leftover'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('leftover') " data-ng-class="{active: row == '-leftover'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Vencimento
                            <span class="fa fa-angle-up" data-ng-click="order_miles('due_date') " data-ng-class="{active: row == 'due_date'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('due_date') " data-ng-class="{active: row == '-due_date'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Contrato
                            <span class="fa fa-angle-up" data-ng-click="order_miles('contract_due_date') " data-ng-class="{active: row == 'contract_due_date'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('contract_due_date') " data-ng-class="{active: row == '-contract_due_date'}"></span>
                        </div>
                    </th>
                    <th ng-if="flight_selected.airline == 'LATAM' || flight_selected.airline == 'AZUL' || flight_selected.airline == 'GOL' ">
                        <div class="th">Vagas
                            <span class="fa fa-angle-up" data-ng-click="order_miles('wave') " data-ng-class="{active: row == 'wave'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('wave') " data-ng-class="{active: row == '-wave'}"></span>
                        </div>
                    </th>
                    <th ng-if="flight_selected.airline == 'GOL' ">
                        <div class="th">Vagas Diamante
                            <span class="fa fa-angle-up" data-ng-click="order_miles('diamond_free') " data-ng-class="{active: row == 'diamond_free'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('diamond_free') " data-ng-class="{active: row == '-diamond_free'}"></span>
                        </div>
                    </th>
                    <th ng-if="flight_selected.airline == 'LATAM' || flight_selected.airline == 'AZUL' || flight_selected.airline == 'GOL' ">
                        <div class="th">Media
                            <span class="fa fa-angle-up" data-ng-click="order_miles('media') " data-ng-class="{active: row == 'media'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order_miles_down('media') " data-ng-class="{active: row == '-media'}"></span>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="mile in flight_miles" ng-click="setCard(mile)">
                    <td>
                        <div>
                            <span class="{{orderMiles(mile)}}">{{mile.name}}</span>
                            <span ng-show="mile.usedByCurrent" class="label label-default" style="margin-left: 15px;"> *!*</span>
                        </div>
                    </td>
                    <td>
                        <div>
                            <span class="{{orderMiles(mile)}}">{{mile.card_number}}</span>
                        </div>
                    </td>
                    <td>{{mile.airline}}</td>
                    <td>{{mile.card_type}}</td>
                    <td>{{mile.token}}</td>
                    <td>{{mile.chip_number}}</td>
                    <td class="text-right">
                        <div>
                            <span class="{{orderMiles(mile)}}">{{formatNumber(mile.leftover,0)}}</span>
                        </div>
                    </td>
                    <td>
                        <div>
                            <span class="{{orderMiles(mile)}}">{{ findDate(mile.due_date) | date:'dd/MM/yyyy'}}</span>
                        </div>
                    </td>
                    <td>
                        <div>
                            <span class="{{orderMiles(mile)}}">{{ findDate(mile.contract_due_date) | date:'dd/MM/yyyy'}}</span>
                        </div>
                    </td>
                    <td ng-if="flight_selected.airline == 'LATAM' || flight_selected.airline == 'AZUL' || flight_selected.airline == 'GOL' ">
                        {{mile.wave}}
                    </td>
                    <td ng-if="flight_selected.airline == 'GOL' ">
                        {{mile.diamond_free}}
                    </td>
                    <td ng-if="flight_selected.airline == 'LATAM' || flight_selected.airline == 'AZUL' || flight_selected.airline == 'GOL' ">
                        {{ formatNumber((mile.leftover / mile.wave), 0) }}
                    </td>
                </tr>
            </tbody>
        </table>

        <table class="table table-striped table-responsive" ng-show="filteredflight_miles.length > 0">
            <thead>
                <th>
                    <div class="th">
                        <span class="label label-success">Prioridade de uso</span>
                    </div>
                </th>
                <th>
                    <div class="th">
                        <span class="label label-primary">Combinação perfeita</span>
                    </div>
                </th>
                <th>
                    <div class="th">
                        <span class="label label-danger">Vencimento em ate 20 dias</span>
                    </div>
                </th>
                <th>
                    <div class="th">
                        <span class="label label-warning">Vencimento entre 21 e 40 dias</span>
                    </div>
                </th>
            </thead>
        </table>

        <footer class="table-footer">
            <div class="row">
                <div class="col-md-4 panel-body">
                    <div class="col-sm-12">
                        <button type="button" ng-click="backToOrder();" class="btn btn-warning">Voltar</button>
                    </div>
                </div>
                <div class="col-md-4 page-num-info">
                    <span>
                        Show
                        <select data-ng-model="numPerPageMiles" data-ng-options="num for num in numPerPageOptMiles" data-ng-change="loadOrderMilesFunction()">
                        </select>
                        entries per page
                    </span>
                </div>
                <div class="col-md-4 pagination-container">
                    <pagination class="pagination-sm"
                        ng-model="currentPageMiles"
                        total-items="total_miles"
                        max-size="4"
                        ng-change="loadOrderMilesFunction()"
                        items-per-page="numPerPageMiles"
                        rotate="false"
                        previous-text="&lsaquo;"
                        next-text="&rsaquo;"
                        boundary-links="true">
                    </pagination>
                </div>
                <div class="col-md-4 text-right page-num-info">
                    <span>
                        Showing {{flight_miles.length}}/{{total_miles}} entries
                    </span>
                </div>
            </div>
        </footer>
    </section>

    <section class="panel panel-default mail-container mail-compose" ng-show="tabindex == 2" nv-file-drop="" uploader="uploader"
        filters="queueLimit, customFilter">
        <div class="panel-heading">
            <strong>Escrever Email</strong>
        </div>
        <div class="panel-body">
            <form class="form-horizontal">
                <div class="form-group">
                    <label for="mail_to" class="col-xs-2">Para:</label>
                    <div class="col-xs-10">
                        <!-- <input type="text" ng-model="wsalemail.emailpartner" id="mail_to" class="form-control"> -->
                        <span class="ui-select">
                            <select ng-model="wsalemail.emailpartner">
                                <option class="form-control" ng-repeat="email in saleEmails" value="{{email}}">{{email}}</option>
                            </select>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mail_cc" class="col-xs-2">CC:</label>
                    <div class="col-xs-10">
                        <!-- <input type="text" id="mail_cc" ng-model="wsalemail.mailcc" class="form-control"> -->
                        <span class="ui-select">
                            <select ng-model="wsalemail.mailcc">
                                <option class="form-control" ng-repeat="email in saleEmails" value="{{email}}">{{email}}</option>
                            </select>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="mail_subject" class="col-xs-2">Assunto:</label>
                    <div class="col-xs-10">
                        <input type="text" id="mail_subject" ng-model="wsalemail.subject" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-4">
                        <table class="table">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Progresso</td>
                                    <td>Ações</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in uploader.queue">
                                    <td>
                                        <strong>{{ item.file.name }}</strong>
                                    </td>
                                    <td ng-show="uploader.isHTML5">
                                        <div class="progress" style="margin-bottom: 0;">
                                            <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                        </div>
                                    </td>
                                    <td nowrap>
                                        <button type="button" class="btn btn-success btn-xs" ng-click="item.upload(); loadFiles();" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                            <span class="glyphicon glyphicon-upload"></span> Upload
                                        </button>
                                        <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                            <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                                        </button>
                                        <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                            <span class="glyphicon glyphicon-trash"></span> Remove
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <input type="file" nv-file-select="" uploader="uploader" multiple />
                <br/>
                <div class="well my-drop-zone" nv-file-over="" uploader="uploader">
                    Arraste e solte
                </div>
                <div text-angular ng-model="wsalemail.emailContent" ng-class="ui-editor">
                </div>
            </form>
            <div class="mail-actions">
                <div class="col-sm-6">
                    <div class="btn btn-sm btn-default" ng-click="undo();">Voltar</div>
                </div>
                <div class="col-sm-6 text-right">
                    <a ng-click="mailOrder();" class="btn btn-sm btn-primary">
                        <i></i>enviar</a>
                </div>
            </div>
        </div>
    </section>

    <section class="panel panel-default table-dynamic" ng-show="tabindex == 3">
        <div class="panel-heading">
            <strong>
                </span> Dados do Cliente
                <label ng-show="response != undefined"> ***Status do Cliente - {{response.status}} - Tipo de Pagamento: {{response.paymentType}}</label>
            </strong>
        </div>
        <div class="panel-body">
            <div>
                <form class="form-horizontal" name="wsale_formorder">
                    <div class="form-group">
                        <label class="col-sm-2">Cliente</label>
                        <div class="col-sm-10">
                            <input type="text" ng-model="wsale.client" ng-readonly="response != undefined" typeahead="client.name for client in clients | filter:$viewValue | limitTo:8"
                                class="form-control" placeholder="Pesquisar" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2">Emissor</label>
                        <div class="col-sm-10">
                            <input type="text" ng-model="selected.issuing" ng-readonly="response != undefined" typeahead="issuing.name for issuing in issuings | filter:$viewValue | limitTo:8"
                                class="form-control" placeholder="Pesquisar">
                        </div>
                    </div>
                    <div class="form-group" ng-hide="response != undefined">
                        <label class="col-sm-2">Emissor Parceiro</label>
                        <div class="col-sm-10">
                            <input type="text" ng-model="wsale.partnername" class="form-control" ng-readonly="response != undefined" placeholder="Pesquisar">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2">Observação</label>
                        <div class="col-sm-10">
                            <input type="text" ng-model="selected.comments" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-6">
                            <button type="button" ng-click="backToList()" class="btn btn-warning"> anterior</button>
                        </div>
                        <div class="col-sm-6 text-right" ng-show="showNextStep">
                            <button type="button" ng-click="validOrder();" class="btn btn-line-info">proximo</button>
                        </div>
                        <div class="col-sm-12 text-center">
                            <div class="btn-group dropdown" dropdown is-open="isopenDropDown">
                                <button type="button" class="btn btn-info dropdown-toggle" dropdown-toggle ng-disabled="disabled">Opções
                                    <span class="caret"></span>
                                </button>
                                <div class="dropdown-menu with-arrow panel panel-default">
                                    <ul class="list-group">
                                        <li class="list-group-item" ng-show="main.isMaster || main.sale || main.changeSale">
                                            <button type="button" ng-click="cancelOrder();" class="btn btn-danger">Cancelar OP</button>
                                        </li>
                                        <li class="list-group-item" ng-show="selected.status == 'PENDENTE' ">
                                            <button type="button" ng-click="setStatusOrder(selected, 'ESPERA');" class="btn btn-info"> Em espera</button>
                                        </li>
                                        <li class="list-group-item" ng-show="selected.status == 'ESPERA' ">
                                            <button type="button" ng-click="setStatusOrder(selected, 'PENDENTE');" class="btn btn-info"> Pendente</button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12 text-center" ng-show="cancel">
                            <input type="text" ng-model="selected.cancelReason" class="form-control">
                            <br>
                            <div class="col-sm-12 text-center" ng-show="cancel">
                                <button type="button" ng-click="cancelOnlineOrder();" class="btn btn-danger">Confirmar Cancelameto</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <section class="panel panel-default" ng-show="tabindex == 4" nv-file-drop="" uploader="uploader_billets" filters="queueLimit, customFilter">
        <div class="panel-heading">
            <strong>Resumo - {{findDate(selected.created_at) | date:'dd/MM/yyyy HH:mm:ss'}}
                <div ng-if="commercial_free.partner">
                    - Liberado comercial: {{commercial_free.partner}} - {{ findDate(commercial_free.issue_date) | date:'dd/MM/yyyy HH:mm:ss'
                    }}

                </div>
            </strong>
            <button ng-if="robotLog.length > 0" type="button" class="btn btn-line-danger smallBtn" ng-click="openRobotLog()">Acompanha ROBO</button>
            <!-- <button ng-if="robotLog.length > 0" type="button" class="btn btn-danger smallBtn" ng-click="limpaRobo()">Limpar Robo</button> -->
            <div ng-if="(selected.airline == 'AZUL' || selected.airline == 'AZUL | AZUL' || selected.airline == 'GOL' || selected.airline == 'GOL | GOL') && robotLog.length == 0 && (selected.status != 'EMITIDO' && selected.status != 'VERIFICADO') ">
                <button type="button" ng-disabled="bloqueiaRobo" class="btn btn-warning smallBtn" ng-click="in8Bot();">Emitir com robo</button>
                <!-- <button type="button" class="btn btn-warning smallBtn" ng-click="in8Bot();">Emitir com robo</button> -->
            </div>
            <div ng-if=" response.notificationurl != null && response.notificationurl != '' || ( selected.notificationurl != '' && selected.notificationurl != null ) " style="display:  inline;">
                <button class="btn btn-info smallBtn opts-notification-order" ng-click="openOrdersNotificationModal()">Historico</button>
                <button ng-if="selected.status != 'EMITIDO' && selected.status != 'VERIFICADO'" class="btn btn-warning smallBtn opts-notification-order" ng-click="openNotificationModal()">Notificações</button>
            </div>
        </div>
        <div>
            <script type="text/ng-template" id="ClientWarningModalCtrl.html">
            <div class="modal-header">
                <h3>Aviso de Cliente</h3>
            </div>
            <div class="modal-body">
                <form class="form-horizontal ng-pristine ng-valid">
                <div class="form-group">
                    <label for="" class="col-sm-12">FOI IDENTIFICADO PENDENCIA PARA O CLIENTE</label>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-12">FAVOR CONSULTAR O FINANCEIRO ANTES DE PROSSEGUIR</label>
                </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" ng-click="cancel();">OK</button>
            </div>
            </script>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-profile">
                        <ul class="list-unstyled list-info">
                            <li>
                                <span class="icon fas fa-money-bill-alt"></span>
                                <label>Total Pedido</label>
                                <table class="table table-bordered table-striped table-responsive">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="th">
                                                    Cliente
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Emissor
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Email
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Total Milhas
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Cartão Global
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Total Tarifa
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Total Taxa
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Total Desconto
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Valor total
                                                </div>
                                            </th>

                                        </tr>
                                    </thead>
                                    <tbody style="font-weight: 900">
                                        <tr>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>{{selected.client_name}}</font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>{{selected.issuing}}</font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>{{selected.client_email}}</font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>
                                                    <div class="text-right">{{formatNumber(selected.miles_used,0)}}</div>
                                                </font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <!-- <button type="button" ng-hide="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' ) || getFlightsAirlines()" class="btn btn-info smallBtn" ng-click="loadOrderMiles()">
                                                    <font color='#ffffff'>Cartão Milhas</font>
                                                </button> -->
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>
                                                    <div class="text-right">{{formatNumber(getTotal())}}</div>
                                                </font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>
                                                    <div class="text-right">{{formatNumber(getTotalTax())}}</div>
                                                </font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>
                                                    <div class="text-right">{{formatNumber(getTotalDiscount())}}</div>
                                                </font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>
                                                    <div class="text-right">{{formatNumber(getTotalValue())}}</div>
                                                    <div ng-if="selected.cupom > 0" class="text-right">Cupom: {{selected.nomeCupom}}</div>
                                                    <div ng-if="selected.cupom > 0" class="text-right">Valor Cupom: {{formatNumber(selected.cupom)}}</div>
                                                    <div ng-if="selected.cupom > 0" class="text-right">Valor Final: {{formatNumber(getTotalValue() - selected.cupom)}}</div>
                                                    <div ng-if="selected.creditoUsado > 0" class="text-right">Credito Usado: {{selected.creditoUsado}}</div>
                                                    <div ng-if="selected.indicacao" class="text-right">Indicação: {{selected.indicacao}}</div>
                                                </font>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li ng-if="selected.totalParcelas && selected.totalParcelas != ''">
                                <span class="icon fas fa-money-bill-alt"></span>
                                <label>Pagamento por cartão</label>
                                <table class="table table-bordered table-striped table-responsive">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="th">
                                                    Acrescimo
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Total parcelas
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Acresimo
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Valor total
                                                </div>
                                            </th>

                                        </tr>
                                    </thead>
                                    <tbody style="font-weight: 900">
                                        <tr>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>{{selected.acrescimo}}</font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>{{selected.totalParcelas}}</font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>{{ formatNumber(selected.total_cost - getTotalValue() ) }}</font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>
                                                    <div class="text-right">{{formatNumber(selected.total_cost)}}</div>
                                                </font>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li ng-if="comprovanteTransferencia != {}">
                                <span class="icon fas fa-money-bill-alt"></span>
                                <label>Links</label>
                                <table class="table table-bordered table-striped table-responsive">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="th">
                                                    Nome
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Acesso
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody style="font-weight: 900">
                                        <tr data-ng-repeat="(keyType, like) in comprovanteTransferencia">
                                            <td bgcolor='#5D7B9D'>
                                                <font color='#ffffff'>{{key}}</font>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <a href="https://s3.amazonaws.com/mms-comprovantetransferenciamms/{{ like }}" target="_blank">{{key}}</a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li>
                                <span class="icon glyphicon glyphicon-credit-card"></span>
                                <label>Observações</label>
                                <table class="table table-bordered table-striped table-responsive">
                                    <tbody>
                                        <td style="font-size: 15px">
                                            <strong>{{selected.comments}}</strong>
                                        </td>
                                    </tbody>
                                </table>
                            </li>
                            <li>
                                <span class="icon glyphicon glyphicon-plane"></span>
                                <label>Vôos</label>
                                <table class="table table-bordered table-striped table-responsive">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="th">
                                                    Companhia
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Vôo
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Conexôes
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Embarque
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    De
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Para
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Desembarque
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Milhas Voo
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Tarifa (Trecho)
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Taxa
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Valor Total
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Classe
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Cartão Vôo
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Cartão de Crédito
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Dados Vôo
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody style="font-weight: 900">
                                        <tr data-ng-repeat="onlineflight in resume_flights" ng-click="setSelectedFlight();">
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">{{onlineflight.airline}}</td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">{{onlineflight.flight}}</td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">{{onlineflight.connection}}</td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">{{findDate(onlineflight.boarding_date) | date:'dd/MM/yyyy'}}
                                                <br>{{findDate(onlineflight.boarding_date) | date:'HH:mm:ss'}}</td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">
                                                <div ng-class="{'label label-warning': onlineflight.flight_category != '' }">{{onlineflight.airport_code_from}}</div>
                                                <div ng-if="onlineflight.flight_category != '' ">
                                                    <br/>{{onlineflight.flight_category}}</div>
                                            </td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">
                                                <div ng-class="{'label label-warning': onlineflight.flight_category != '' }">{{onlineflight.airport_code_to}}</div>
                                            </td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">{{findDate(onlineflight.landing_date) | date:'dd/MM/yyyy'}}
                                                <br>{{findDate(onlineflight.landing_date) | date:'HH:mm:ss'}}</td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">
                                                <div class="text-right" ng-if="onlineflight.emissionMethod != 'Companhia' ">{{formatNumber(onlineflight.original_miles,0)}}</div>
                                                <div class="text-right" ng-if="onlineflight.emissionMethod == 'Companhia' ">Companhia - Pagante</div>
                                            </td>
                                            <td class="text-right" bgcolor='#5D7B9D' style="color: #ffffff">
                                                {{formatNumber(onlineflight.cost)}}
                                                <div ng-show="hasChild()">CHD - {{formatNumber(onlineflight.cost_per_child)}}</div>
                                                <div ng-show="hasNewBorn()">INF - {{formatNumber(onlineflight.cost_per_newborn)}}</div>
                                            </td>
                                            <td class="text-right" bgcolor='#5D7B9D' style="color: #ffffff">{{formatNumber(onlineflight.tax)}}
                                                <div ng-show="hasChild()">{{formatNumber(onlineflight.tax)}}</div>
                                            </td>
                                            <td class="text-right" bgcolor='#5D7B9D' style="color: #ffffff">{{formatNumber(onlineflight.cost + onlineflight.tax - onlineflight.discount)}}
                                                <div ng-show="hasChild()">{{formatNumber(onlineflight.cost_per_child + onlineflight.tax)}}</div>
                                                <div ng-show="hasNewBorn()">{{formatNumber(onlineflight.cost_per_newborn)}}</div>
                                            </td>
                                            <td bgcolor='#5D7B9D' style="color: #ffffff">
                                                <span class="ui-select label" ng-class="{'label-warning': onlineflight.class != 'Economica', 'label-defaul': onlineflight.class == 'Economica' }">
                                                    <select ng-model="onlineflight.class" class="small-select" ng-change="changeClassFlights(onlineflight)">
                                                        <option class="form-control" value="Economica">Economica</option>
                                                        <option class="form-control" value="Executiva">Executiva</option>
                                                    </select>
                                                </span>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <button type="button" ng-hide="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' ) || onlineflight.provider != '' || onlineflight.airline == 'LATAM' || onlineflight.airline == 'AZUL' || onlineflight.airline == 'GOL' " class="btn btn-info smallBtn"
                                                    ng-click="findFlightMiles()">Cartão Milhas</button>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <div data-ng-controller="CardTaxFlightDataCtrl">
                                                    <script type="text/ng-template" id="CardTaxFlightDataCtrl.html">
                                                        <div class="modal-header">
                                                            <h3>Cartão para Taxa</h3>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form class="form-horizontal ng-pristine ng-valid">
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Pesquisar</label>
                                                                    <div class="col-sm-8">
                                                                        <span class="ui-select" ng-readonly="!master && checked">
                                                                        <select ng-model="filter.card_number" ng-readonly="!master && checked" ng-change="search()">
                                                                            <option class="form-control" ng-repeat="card in resume_creditCards" value="{{card.card_number}}">{{card.card_number}}</option>
                                                                        </select>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Numero Cartão</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.tax_card"class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Senha</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.tax_password"class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Tipo</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.tax_cardType" class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Vencimento</label>
                                                                    <div class="col-sm-8">
                                                                        {{findDate(flight_selected.tax_dueDate) | date:'MM/yyyy'}}
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Fornecedor</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.tax_providerName" class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">CPF</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.provider_registration" class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">TELEFONE</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.providerPhone" class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">EMAIL</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.providerEmail" class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Endereço</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.provider_adress" class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Endereço 2</label>
                                                                    <div class="col-sm-8">
                                                                        <input type="text" ng-model="flight_selected.providerAdress" class="form-control" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="" class="col-sm-4">Nascimento</label>
                                                                    <div class="col-sm-8">
                                                                        {{findDate(flight_selected.birthdate) | date:'dd/MM/yyyy'}}
                                                                    </div>
                                                                </div>
                                                                <div class="form-group" ng-show="!master">
                                                                    <div class="col-sm-2">
                                                                        <button type="button" class="btn btn-line-info" ng-click="changeValue()">Alterar</button>
                                                                    </div>
                                                                </div>
                                                                <br>
                                                                <div class="form-group" ng-show="change">
                                                                    <label for="" class="col-sm-4">PIN</label>
                                                                    <div class="col-sm-4">
                                                                        <input type="password" class="form-control" ng-model="flight_selected.pinCode">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group" ng-show="change">
                                                                    <div class="col-sm-4">
                                                                        <button type="button" class="btn btn-primary" ng-click="check();">Confirmar</button>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-primary" ng-click="ok();">Confirmar</button>
                                                            <button type="button" class="btn btn-warning" ng-click="cancel();">Cancelar</button>
                                                        </div>
                                                    </script>
                                                    <button type="button" ng-hide="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') || onlineflight.provider != ''"
                                                        class="btn btn-info smallBtn" ng-click="open()">
                                                        <div ng-hide="onlineflight.tax_card">Cartão de Crédito</div>
                                                        <div ng-show="onlineflight.tax_card">{{onlineflight.tax_card}}</div>
                                                    </button>
                                                </div>
                                            </td>
                                            <td bgcolor='#5D7B9D'>
                                                <div data-ng-controller="FlightDataCtrl">
                                                    <script type="text/ng-template" id="FlightDataOnline.html">
                                                    <div class="modal-header">
                                                        <h3>Dados do Vôo</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                        <form class="form-horizontal ng-pristine ng-valid">
                                                        <div class="form-group">
                                                            <label for="" class="col-sm-4">Taxa Embarque</label>
                                                            <div class="col-sm-8">
                                                                <input type="number" class="form-control" ng-model="flight_selected.tax">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="" class="col-sm-4">Localizador</label>
                                                            <div class="col-sm-8">
                                                                <input type="text" class="form-control" ng-model="flight_selected.flightLocator">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="col-sm-8">
                                                                <input type="checkbox" ng-model="third">Emissão por terceiros<br>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div ng-show="third" class="col-sm-8">
                                                                <label for="" class="col-sm-4">Fornecedor</label>
                                                                <select class="form-control" ng-options="option for option in saleMethods" ng-model="flight_selected.provider"></select>

                                                                <!--<label style="margin-bottom: 100px; margin-top: 10px;" ng-show="flight_selected.provider == 'CONFIANÇA' || flight_selected.provider == 'Rextur Advance'" for="" class="col-sm-4">DESCRIÇÃO</label>
                                                                <div text-angular style="margin-top: 30px; width: 560px; height: 250px;" ng-model="textarea" ng-class="ui-editor" ng-show="flight_selected.provider == 'CONFIANÇA' || flight_selected.provider == 'Rextur Advance'" ng class="form-control"></div>

                                                                <div ng-show="(flight_selected.provider == 'CONFIANÇA' || flight_selected.provider == 'Rextur Advance')&&(!textarea)" class="alert alert-danger" role="alert">É NECESSÁRIO PREENCHER O TEXTO COM A DESCRIÇÃO!</div>0-->
                                                                <div class="col-sm-8" ng-show="flight_selected.provider == 'Rextur Advance'">
                                                                    <label for="" class="col-sm-4">Metodo Venda</label>
                                                                    <select class="form-control" ng-options="option for option in safeMethods" ng-model="flight_selected.safeType"></select>
                                                                </div>
                                                                <div class="col-sm-8" ng-show="flight_selected.provider == 'JACK FOR' ">
                                                                    <label for="" class="col-sm-4">Codigo Reserva</label>
                                                                    <input type="text" class="form-control" ng-model="flight_selected.partnerReservationCode">
                                                                </div>
                                                                <br>
                                                            </div>
                                                        </div>
                                                        </form>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-primary" ng-click="ok();">Confirmar</button>
                                                        <button type="button" class="btn btn-warning" ng-click="cancel();">Cancelar</button>
                                                    </div>
                                                    </script>
                                                    <button type="button" ng-hide="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'" class="btn btn-info smallBtn"
                                                        ng-click="open()">Alterar dados</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li>
                                <span class="icon glyphicon glyphicon-user"></span>
                                <label>Passageiros</label> -
                                <strong>{{getPaxDescription()}}</strong>
                                <table class="table table-bordered table-striped table-responsive">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="th">
                                                    Nome
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Sobrenome
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Agnome
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Tipo Pax
                                                </div>
                                            </th>
                                            <th ng-click="openAllPaxUsedCards()">
                                                <div class="th">
                                                    Identificação
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Documento 2
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Passaporte
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Data de Nascimento
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Data Passaporte
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Gênero
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Dados do Pax
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody style="font-weight: 900">
                                        <tr data-ng-repeat="pax in resume_paxs">
                                            <td ng-style="{color: checkPaxNames(pax.pax_name) == true ? 'orange' : '#767676' }">
                                                <div ng-bind-html="getPaxName(pax.pax_name, pax.paxLastName, 'primeiro')"></div>
                                            </td>
                                            <td ng-style="{color: checkPaxNames(pax.paxLastName) == true ? 'orange' : '#767676' }">
                                                <div ng-bind-html="getPaxName(pax.paxLastName, pax.paxLastName, 'segundo')"></div>
                                            </td>
                                            <td ng-style="{color: checkPaxNames(pax.paxAgnome) == true ? 'orange' : '#767676' }">{{pax.paxAgnome}}</td>
                                            <td>{{getPaxType(pax);}}</td>
                                            <td ng-click="openPaxUsedCards(pax)">
                                                <div ng-if="!pax.quant || pax.quant == 0">
                                                    {{pax.identification}}
                                                </div>
                                                <div ng-if="pax.quant > 0">
                                                    <strike>{{pax.identification}}</strike>
                                                </div>
                                                <span ng-if="pax.quant > 0" class="badge badge-danger">{{pax.quant}}</span>
                                            </td>
                                            <td>{{pax.code}}</td>
                                            <td>{{pax.passaporte}}</td>
                                            <td>{{pax.birhtdate | date:'dd/MM/yyyy'}}</td>
                                            <td>{{pax.data_passaporte | date:'dd/MM/yyyy'}}</td>
                                            <td>{{pax.gender}}</td>
                                            <td>
                                                <div data-ng-controller="PaxDataCtrl">
                                                    <script type="text/ng-template" id="PaxData.html">
                                                    <div class="modal-header">
                                                    <h3>Dados do Pax</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                    <form class="form-horizontal ng-pristine ng-valid">
                                                        <div class="form-group">
                                                        <label for="" class="col-sm-4">Nome</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" ng-model="pax_selected.pax_name" ng-readonly="!master && checked">
                                                        </div>
                                                        </div>
                                                        <div class="form-group">
                                                        <label for="" class="col-sm-4">Sobrenome</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" ng-model="pax_selected.paxLastName" ng-readonly="!master && checked">
                                                        </div>
                                                        </div>
                                                        <div class="form-group">
                                                        <label for="" class="col-sm-4">Agnome</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" ng-model="pax_selected.paxAgnome" ng-readonly="!master && checked">
                                                        </div>
                                                        </div>
                                                        <div class="form-group">
                                                        <label for="" class="col-sm-4">Identificação</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" ng-model="pax_selected.identification" ng-readonly="!master && checked">
                                                        </div>
                                                        </div>
                                                        <div class="form-group" ng-show="!master">
                                                        <div class="col-sm-2">
                                                            <button type="button" class="btn btn-line-info" ng-click="changeValue()">Alterar</button>
                                                        </div>
                                                        </div>
                                                        <br>
                                                        <div class="form-group" ng-show="change">
                                                        <label for="" class="col-sm-4">PIN</label>
                                                        <div class="col-sm-4">
                                                            <input type="password" class="form-control" ng-model="flight_selected.pinCode">
                                                        </div>
                                                        </div>
                                                        <div class="form-group" ng-show="change">
                                                        <div class="col-sm-4">
                                                            <button type="button" class="btn btn-primary" ng-click="check();">Confirmar</button>
                                                        </div>
                                                        </div>
                                                    </form>
                                                    </div>
                                                    <div class="modal-footer">
                                                    <button type="button" class="btn btn-primary" ng-click="ok();">Confirmar</button>
                                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancelar</button>
                                                    </div>
                                                </script>
                                                    <button type="button" ng-hide="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'" class="btn btn-line-info smallBtn"
                                                        ng-click="open()">Alterar dados</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li ng-show="(isValidOrder() && ( response.notificationurl != null && response.notificationurl != '' )) || selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'">
                                <label>Bilhetes</label>
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                    <td>Progresso</td>
                                                    <td>Ações</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="item in uploader_billets.queue">
                                                    <td>
                                                        <strong>{{ item.file.name }}</strong>
                                                    </td>
                                                    <td ng-show="uploader_billets.isHTML5">
                                                        <div class="progress" style="margin-bottom: 0;">
                                                            <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                                        </div>
                                                    </td>
                                                    <td nowrap>
                                                        <button type="button" class="btn btn-success btn-xs" ng-click="item.upload(); loadFiles();" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                                            <span class="glyphicon glyphicon-upload"></span> Upload
                                                        </button>
                                                        <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                                            <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                                                        </button>
                                                        <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                                            <span class="glyphicon glyphicon-trash"></span> Remove
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <input type="file" nv-file-select="" uploader="uploader_billets" multiple />
                                        <br/>
                                        <div class="well my-drop-zone" nv-file-over="" uploader="uploader_billets">
                                            Arraste e solte os Bilhetes aqui
                                        </div>
                                    </div>
                                </div>

                            </li>
                            <li>
                                <span class="icon glyphicon glyphicon-credit-card"></span>
                                <label>Cartão</label>
                                <div ng-show="billetCanbas" id="miscCanvas">
                                    <br>
                                    <br>
                                </div>
                                <table class="table table-bordered table-striped table-responsive">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="th">
                                                    CIA
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Võo
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Passageiro
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Tipo Pax
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    CPF / Número

                                                    <div ng-if="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'">
                                                        <button class="btn btn-info smallBtn" ng-click="checkAllSales()" type="button">Check - Todos</button>
                                                        <button class="btn btn-info smallBtn" ng-click="checkAllSale2()" type="button">Check 2 - Todos</button>
                                                    </div>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Senha
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Senha de Resgate
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Token
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Pontos Vôo
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Bagagem
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Alterar Cartão
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Cartão Taxa
                                                </div>
                                            </th>
                                            <th>
                                                <div class="th">
                                                    Alterar Dados
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="onlineflight in onlineflights" style="font-weight: 900">
                                        <td>{{onlineflight.airline}}
                                            <div ng-show="onlineflight.isBreak == 'Quebrado'">
                                                <br>
                                                <font color='#F70909'>DESVINCULADO</font>
                                            </div>
                                        </td>
                                        <td>{{onlineflight.flight}}</td>
                                        <td>{{onlineflight.pax_name}} {{onlineflight.paxLastName}} {{onlineflight.paxAgnome}}</td>
                                        <td>{{getPaxType(onlineflight);}}</td>
                                        <td>
                                            <div data-ng-controller="CardFlightSelectedData">
                                                <script type="text/ng-template" id="CardFlightSelectedData.html">
                                                <div class="modal-header">
                                                    <h3>Dados do Cartão</h3>
                                                </div>
                                                <div class="modal-body">
                                                    <form class="form-horizontal ng-pristine ng-valid">
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Nome Fornecedor</label>
                                                        <div class="col-sm-8">
                                                        <ul class="list-group">
                                                            <li class="list-group-item">{{flight_selected.providerName}}
                                                            </li>
                                                        </ul>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Numero Cartão</label>
                                                        <div class="col-sm-8">
                                                        <ul class="list-group">
                                                            <li class="list-group-item">{{flight_selected.card_number}}
                                                            </li>
                                                        </ul>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Tipo Cartão</label>
                                                        <div class="col-sm-8">
                                                        <ul class="list-group">
                                                            <li class="list-group-item">{{flight_selected.card_type}}
                                                            </li>
                                                        </ul>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">CPF</label>
                                                        <div class="col-sm-8">
                                                        <ul class="list-group">
                                                            <li class="list-group-item">{{flight_selected.card_registrationCode}}
                                                            </li>
                                                        </ul>
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="flight_selected.airline != 'AZUL' ">
                                                        <label for="" class="col-sm-4">Email</label>
                                                        <div class="col-sm-8">
                                                        <ul class="list-group">
                                                            <li class="list-group-item">{{flight_selected.email_provider}}
                                                            </li>
                                                        </ul>
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="flight_selected.airline != 'AZUL' ">
                                                        <label for="" class="col-sm-4">Telefone</label>
                                                        <div class="col-sm-8">
                                                        <ul class="list-group">
                                                            <li class="list-group-item">{{flight_selected.celNumberAirline}}</li>
                                                            <li class="list-group-item">{{flight_selected.provider_phone}}</li>
                                                        </ul>
                                                        </div>
                                                    </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Fechar</button>
                                                </div>
                                                </script>
                                                <button type="button" class="btn btn-info smallBtn" ng-click="open()">{{onlineflight.card_registrationCode}} / {{onlineflight.card_number}}</button>
                                                <div ng-show="onlineflight.provider != ''">
                                                    <br>
                                                    <font color='#F70909'>{{onlineflight.provider}}</font>
                                                </div>
                                                <div>
                                                    <br>LOC: {{onlineflight.flightLocator}}</div>
                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.ticket_code">
                                                    <br>Eticket: {{onlineflight.ticket_code}}</div>
                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.tax_card">
                                                    <br>Cartão: {{onlineflight.tax_card}}</div>
                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.user">
                                                    <br>{{onlineflight.user}}</div>
                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.partnerReservationCode != '' ">
                                                    <br>CODIGO RESERVA: {{onlineflight.partnerReservationCode}}
                                                </div>
                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.processing_time != '' ">
                                                    <br>Tempo: {{onlineflight.processing_time}}</div>
                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.status != '' ">
                                                    <br>Status: {{onlineflight.status}}</div>

                                                <div ng-show="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') && onlineflight.airline == 'GOL' ">
                                                    <br>
                                                    <label class="switch">SMS GOL
                                                        <input type="checkbox" ng-model="onlineflight.sms" ng-checked="onlineflight.sms" ng-click="checkSMS(onlineflight)">
                                                        <i></i>
                                                    </label>
                                                </div>

                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'">
                                                    <label class="switch">Check
                                                        <input type="checkbox" ng-model="onlineflight.saleChecked" ng-checked="onlineflight.saleChecked" ng-click="checkSale(onlineflight)">
                                                        <i></i>
                                                    </label>
                                                    <div ng-show="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') && onlineflight.saleCheckedDate && (main.isMaster || main.sale)">
                                                        <br>Checkado: {{findDate(onlineflight.saleCheckedDate) | date:'dd/MM/yyyy HH:mm:ss'}}</div>
                                                </div>

                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'">
                                                    <label class="switch">Check 2
                                                        <input type="checkbox" ng-model="onlineflight.saleChecked2" ng-checked="onlineflight.saleChecked2" ng-click="checkSale2(onlineflight)">
                                                        <i></i>
                                                    </label>
                                                    <div ng-show="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') && onlineflight.saleCheckedDate2 && (main.isMaster || main.sale)">
                                                        <br>Checkado: {{findDate(onlineflight.saleCheckedDate2) | date:'dd/MM/yyyy HH:mm:ss'}}</div>
                                                </div>

                                                <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && (main.isMaster || main.wizardPurchase || main.purchase) && onlineflight.taxOnlinePayment >0">
                                                    <br>Taxa Pagamento Online: {{onlineflight.taxOnlinePayment}}</div>
                                            </div>
                                        </td>
                                        <td>
                                            <div ng-hide="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') && !(main.isMaster || main.sale || main.conference)">
                                                {{onlineflight.recovery_password}}
                                            </div>
                                        </td>
                                        <td>
                                            <div ng-hide="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') && !(main.isMaster || main.sale || main.conference)">
                                                {{onlineflight.access_password}}
                                            </div>
                                        </td>
                                        <td>{{onlineflight.token}} / {{onlineflight.chip_number}}</td>
                                        <td class="text-right">{{formatNumber(onlineflight.miles_used,0)}}
                                            <br>{{formatNumber(getFlightTotal(onlineflight))}}
                                            <div ng-show="onlineflight.du_tax">
                                                <br>DU: {{formatNumber(onlineflight.du_tax)}}</div>
                                            <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'">Taxas: {{formatNumber(taxByFlight(onlineflight))}}</div>
                                            <div ng-show="onlineflight.money">
                                                <br>M+M {{formatNumber(onlineflight.money)}}</div>
                                            <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.baggage_price">
                                                <br>Bagagem: {{onlineflight.baggage_price}}</div>
                                            <div ng-show="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' && onlineflight.special_seat">
                                                <br>Assento Conforto: {{onlineflight.special_seat}}</div>
                                        </td>
                                        <td>
                                            <span class="ui-select" ng-class="{'label-warning': onlineflight.baggage != 0, 'label-defaul': onlineflight.baggage == 0 }">
                                                <select ng-model="onlineflight.baggage" class="small-select" ng-disabled=" selected.status == 'EMITIDO' || selected.status == 'VERIFICADO' ">
                                                    <option class="form-control" value="0">0</option>
                                                    <option class="form-control" value="1">1</option>
                                                    <option class="form-control" value="2">2</option>
                                                    <option class="form-control" value="3">3</option>
                                                    <option class="form-control" value="4">4</option>
                                                    <option class="form-control" value="5">5</option>
                                                    <option class="form-control" value="6">6</option>
                                                    <option class="form-control" value="7">7</option>
                                                    <option class="form-control" value="8">8</option>
                                                    <option class="form-control" value="9">9</option>
                                                    <option class="form-control" value="10">10</option>
                                                    <option class="form-control" ng-if=" onlineflight.airline != 'LATAM' && onlineflight.airline != 'GOL' && onlineflight.airline != 'AZUL' "
                                                        value="11">11</option>
                                                </select>
                                            </span>
                                        </td>
                                        <td>
                                            <button type="button" ng-hide="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') || onlineflight.provider != ''" class="btn btn-line-info smallBtn" ng-click="findMiles()">Cartão Milhas</button>
                                            <br>Cai pontuação<br>
                                            <span class="ui-select" ng-disabled="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') || onlineflight.provider != ''">
                                                <select ng-model="onlineflight.low_points" class="small-select">
                                                    <option class="form-control" value="false">Não</option>
                                                    <option class="form-control" value="true">Sim</option>
                                                </select>
                                            </span>
                                        </td>
                                        <td>
                                            <div data-ng-controller="TaxaCardData">
                                                <script type="text/ng-template" id="TaxaCardData.html">
                                                <div class="modal-header">
                                                    <h3>Cartão para Taxa</h3>
                                                </div>
                                                <div class="modal-body">
                                                    <form class="form-horizontal ng-pristine ng-valid">
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Pesquisar</label>
                                                        <div class="col-sm-8">
                                                        <span class="ui-select" ng-readonly="!master && checked">
                                                            <select ng-model="filter.card_number" ng-readonly="!master && checked" ng-change="search()">
                                                                <option class="form-control" ng-repeat="card in resume_creditCards" value="{{card.card_number}}">{{card.card_number}}</option>
                                                            </select>
                                                        </span>
                                                        </div>
                                                        <br><br>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Numero Cartão</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" ng-model="flight_selected.tax_card"class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Senha</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" ng-model="flight_selected.tax_password"class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Tipo</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" ng-model="flight_selected.tax_cardType" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Vencimento</label>
                                                        <div class="col-sm-8">
                                                        {{findDate(flight_selected.tax_dueDate) | date:'MM/yyyy'}}
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Fornecedor</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" ng-model="flight_selected.tax_providerName" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">CPF</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" ng-model="flight_selected.provider_registration" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">TELEFONE</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" ng-model="flight_selected.providerPhone" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">EMAIL</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" ng-model="flight_selected.providerEmail" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Endereço</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" ng-model="flight_selected.provider_adress" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Endereço 2</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" ng-model="flight_selected.providerAdress" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Nascimento</label>
                                                        <div class="col-sm-8">
                                                        {{findDate(flight_selected.birthdate) | date:'dd/MM/yyyy'}}
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="!master">
                                                        <div class="col-sm-2">
                                                        <button type="button" class="btn btn-line-info" ng-click="changeValue()">Alterar</button>
                                                        </div>
                                                    </div>
                                                    <br>
                                                    <div class="form-group" ng-show="change">
                                                        <!--/*<label for="" class="col-sm-4">Usuário</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" class="form-control" ng-model="flight_selected.userEmail">
                                                        </div><br><br>
                                                        <label for="" class="col-sm-4">Autorização de Segurança</label>
                                                        <div class="col-sm-4">
                                                        <input type="password" class="form-control" ng-model="flight_selected.userPassCode">
                                                        </div><br><br>*/-->
                                                        <label for="" class="col-sm-4">PIN</label>
                                                        <div class="col-sm-4">
                                                        <input type="password" class="form-control" ng-model="flight_selected.pinCode">
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="change">
                                                        <div class="col-sm-4">
                                                        <button type="button" class="btn btn-primary" ng-click="check();">Confirmar</button>
                                                        </div>
                                                    </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-primary" ng-click="ok();">Confirmar</button>
                                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancelar</button>
                                                </div>
                                                </script>
                                                <button type="button" ng-hide="(selected.status == 'EMITIDO' || selected.status == 'VERIFICADO') || onlineflight.provider != ''"
                                                    class="btn btn-line-info smallBtn" ng-click="open()">
                                                    <div ng-hide="onlineflight.tax_card">Cartão de Crédito</div>
                                                    <div ng-show="onlineflight.tax_card">{{onlineflight.tax_card}}</div>
                                                </button>
                                            </div>
                                        </td>
                                        <td>
                                            <div data-ng-controller="FlightSelectedData">
                                                <script type="text/ng-template" id="FlightSelectedData.html">
                                                <div class="modal-header">
                                                    <h3>Dados do Vôo</h3>
                                                </div>
                                                <div class="modal-body">
                                                    <form class="form-horizontal ng-pristine ng-valid">
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Localizador</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" ng-model="flight_selected.flightLocator">
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="flight_selected.airline=='TAM' || flight_selected.airline=='LATAM' || flight_selected.airline=='AVIANCA' ">
                                                        <label for="" class="col-sm-4">E-Ticket</label>
                                                        <div class="col-sm-8">
                                                        <input type="text" class="form-control" ng-model="flight_selected.ticket_code">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Taxa DU</label>
                                                        <div class="col-sm-8">
                                                            <input type="number" class="form-control" ng-model="flight_selected.du_tax">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Valor Acordado</label>
                                                        <div class="col-sm-8">
                                                            <input type="number" id="discount" class="form-control" ng-model="flight_selected.discount" ng-readonly="!master && checked"> 
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Milhas Usadas</label>
                                                        <div class="col-sm-8">
                                                        <input type="number" id="miles_used" class="form-control" ng-model="flight_selected.miles_used" ng-readonly="!master && checked && cardType">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-4">Valor Bagagem</label>
                                                        <div class="col-sm-8">
                                                            <input type="number" class="form-control" ng-model="flight_selected.baggage_price">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="" class="col-sm-2">Assento</label>
                                                        <div class="col-sm-4">
                                                            <input type="text" class="form-control" ng-model="flight_selected.seat">
                                                        </div>

                                                        <label for="" class="col-sm-2">Assento Conforto</label>
                                                        <div class="col-sm-4">
                                                            <input type="number" class="form-control" ng-model="flight_selected.special_seat">
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-repeat="connection in flight_selected.connections">
                                                        <label for="" class="col-sm-2">Assento</label>
                                                        <div class="col-sm-4">
                                                            <input type="text" class="form-control" ng-model="connection.seat">
                                                        </div>
                                                        <div class="col-sm-6"></div>
                                                    </div>
                                                    <div class="form-group" ng-show="flight_selected.airline == 'GOL' || flight_selected.airline == 'AZUL'">
                                                        <div class="col-sm-8">
                                                        <input type="checkbox" ng-model="milesMoney" ng-disabled="!master && checked">Milhas + Money<br>
                                                        </div><br><br>
                                                        <div ng-show="milesMoney">
                                                        <label for="" class="col-sm-4">Milhas + Money</label>
                                                        <div class="col-sm-8">
                                                            <input type="number" class="form-control" ng-model="flight_selected.money" ng-readonly="!master && checked">
                                                        </div>
                                                        </div>
                                                    </div>
                                                        <div class="form-group" ng-show="flight_selected.airline == 'GOL'
                                                            && (flight_selected.card_type != null && flight_selected.card_type.toUpperCase() == 'DIAMANTE')
                                                            && (flight_selected.diamond_free !== 'undefined' && flight_selected.diamond_free !== null && flight_selected.diamond_free > 0)">
                                                            <div class="col-sm-8">
                                                                <input type="checkbox" ng-model="flight_selected.is_diamond">Emissão Diamante<br>
                                                            </div><br><br>
                                                        </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-8">
                                                            <input type="checkbox" ng-model="third">Emissão por terceiros<br>
                                                        </div><br><br>
                                                        <div ng-show="third" class="col-sm-8">
                                                            <label for="" class="col-sm-4">Fornecedor</label>
                                                            <select class="form-control"ng-options="option for option in saleMethods" ng-model="flight_selected.provider"></select>
                                                            <div class="col-sm-8" ng-show="flight_selected.provider == 'Rextur Advance'">
                                                                <label for="" class="col-sm-4">Metodo Venda</label>
                                                                <select class="form-control" ng-options="option for option in safeMethods" ng-model="flight_selected.safeType"></select>
                                                            </div>
                                                            <div class="col-sm-8" ng-show="flight_selected.provider == 'JACK FOR' ">
                                                                <label for="" class="col-sm-4">Codigo Reserva</label>
                                                                <input type="text" class="form-control" ng-model="flight_selected.partnerReservationCode">
                                                            </div>
                                                            <br>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-8">
                                                        <input type="checkbox" ng-model="break" ng-disabled="!master && checked">Desvincular Trecho/Pax<br>
                                                        </div><br><br>
                                                        <div ng-show="break">
                                                        <label for="" class="col-sm-4">Desvincular</label>
                                                        <div class="col-sm-8">
                                                            <span class="ui-select" ng-readonly="!master && checked">
                                                            <select ng-model="flight_selected.isBreak" ng-readonly="!master && checked">
                                                                <option class="form-control" ng-repeat="options in breakoptions" value="{{options.breakOption}}">{{options.breakOption}}</option>
                                                            </select>
                                                            </span>
                                                        </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="!master">
                                                        <div class="col-sm-2">
                                                        <button type="button" class="btn btn-line-info" ng-click="changeValue()">Alterar</button>
                                                        </div>
                                                    </div>
                                                    <br>
                                                    <div class="form-group" ng-show="change">
                                                        <label for="" class="col-sm-4">PIN</label>
                                                        <div class="col-sm-4">
                                                        <input type="password" class="form-control" ng-model="flight_selected.pinCode">
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="change">
                                                        <div class="col-sm-4">
                                                        <button type="button" class="btn btn-primary" ng-click="check();">Confirmar</button>
                                                        </div>
                                                    </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-primary" ng-click="ok();">Confirmar</button>
                                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancelar</button>
                                                </div>
                                                </script>
                                                <button type="button" ng-hide="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'" class="{{findClass(onlineflight);}}"
                                                    ng-click="open()">Alterar dados</button>
                                            </div>
                                            <br>
                                            <div class="col-sm-2" ng-show="(isValidOrder() && onlineflight.airline == 'AZUL' && onlineflight.provider != 'Flytour' && onlineflight.provider != 'CONFIANÇA' && onlineflight.provider != 'Rextur Advance' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance' ) || ((selected.status=='EMITIDO' || selected.status == 'VERIFICADO') && onlineflight.airline == 'AZUL' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance') ">
                                                <button type="button" class="btn btn-warning smallBtn" ng-click="printBilletAzul2();">Baixar Bilhete</button>
                                            </div>
                                            <br>
                                            <div class="col-sm-2" ng-show="(isValidOrder() && (onlineflight.airline == 'LATAM' || onlineflight.airline == 'TAM') && onlineflight.provider != 'Flytour' && onlineflight.provider != 'CONFIANÇA' && onlineflight.provider != 'Rextur Advance' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance') || ((selected.status=='EMITIDO' || selected.status == 'VERIFICADO') && onlineflight.airline == 'LATAM' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance')">
                                                <button type="button" class="btn btn-warning smallBtn" ng-click="printBilletLaTam2();">Baixar Bilhete</button>
                                            </div>
                                            <br>
                                            <div class="col-sm-2" ng-show="(isValidOrder() && onlineflight.airline == 'GOL' && onlineflight.provider != 'Flytour' && onlineflight.provider != 'CONFIANÇA' && onlineflight.provider != 'Rextur Advance' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance') || ((selected.status=='EMITIDO' || selected.status == 'VERIFICADO') && onlineflight.airline == 'GOL' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance') ">
                                                <button type="button" class="btn btn-warning smallBtn" ng-click="printBilletGol4();">Baixar Bilhete</button>
                                            </div>
                                            <div class="col-sm-2" ng-show="(isValidOrder() && onlineflight.airline == 'AVIANCA' && onlineflight.provider != 'Flytour' && onlineflight.provider != 'CONFIANÇA' && onlineflight.provider != 'Rextur Advance' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance') || ((selected.status=='EMITIDO' || selected.status == 'VERIFICADO') && onlineflight.airline == 'AVIANCA' && onlineflight.card_number != 'CONFIANÇA' && onlineflight.card_number != 'Rextur Advance') ">
                                                <button type="button" class="btn btn-warning smallBtn" ng-click="printBilletAvianca();">Baixar Bilhete</button>
                                            </div>
                                            <div class="col-sm-2" ng-show="(isValidOrder() && (onlineflight.provider == 'CONFIANÇA' || onlineflight.provider == 'Rextur Advance')) || ((selected.status=='EMITIDO' || selected.status == 'VERIFICADO') && (onlineflight.card_number == 'CONFIANÇA' || onlineflight.cardNumber == 'Rextur Advance'))">
                                                <button type="button" class="btn btn-warning smallBtn" ng-click="fillEmailBillet(onlineflight);">Enviar e-mail</button>
                                            </div>
                                        </td>
                                    </tbody>
                                </table>
                            </li>
                        </ul>
                        </div>
                        </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-2">
                                <button type="button" ng-click="undoBtt();" class="btn btn-warning">anterior</button>
                            </div>
                            <div class="col-sm-2" ng-show="selected.status == 'EM ESPERA' ">
                                <button type="button" ng-click="saveStatusOrder();" class="btn btn-warning">Tonar PENDENTE</button>
                            </div>
                            <div class="col-sm-2" ng-show="isValidOrder() || (selected.status=='EMITIDO' || selected.status == 'VERIFICADO') ">
                                <button type="button" class="btn btn-warning" ng-click="downloadAllBillets();">Baixar Bilhetes! beta!</button>
                            </div>
                            <div ng-hide="selected.status == 'EMITIDO' || selected.status == 'VERIFICADO'">
                                <!-- <div class="col-sm-3 text-right">
                        <button type="button" class="btn btn-info" ng-click="fillEmailContentSimple();"><span class="glyphicon glyphicon-envelope"></span>  Reservar por E-mail</button>
                    </div> -->
                                <div class="col-sm-3 text-right">
                                    <div data-ng-controller="CloseOrder">
                                        <script type="text/ng-template" id="CloseOrder.html">
                        <div class="modal-header">
                            <h3>Confirmar Venda</h3>
                        </div>
                        <div class="modal-body">
                            <form class="form-horizontal ng-pristine ng-valid">
                            <div class="form-group" ng-show="flight_selected.comments.length > 0">
                                <div class="col-sm-12">
                                <strong>{{flight_selected.comments}}</strong>
                                </div>
                            </div>
                            <div class="form-group" ng-show="findSpecialCardsLATAM() || findSpecialCardsGOL()"></div>
                            <div class="form-group" ng-show="findSpecialCardsLATAM() || findSpecialCardsGOL()"></div>
                            <div class="form-group" ng-show="findSpecialCardsLATAM() || findSpecialCardsGOL()"></div>
                            <div class="form-group" ng-show="findSpecialCardsLATAM()">
                                <div class="col-sm-12">
                                    <strong>Uso de Cartão RED/BLACK detectado</strong>
                                </div>
                            </div>
                            <div class="form-group" ng-show="findSpecialCardsGOL()">
                                <div class="col-sm-12">
                                    <strong>Uso de Cartão DIAMANTE/CLUBE detectado</strong>
                                </div>
                                </div>
                            <div class="form-group" ng-show="findSpecialCardsLATAM() || findSpecialCardsGOL()">
                                <div class="col-sm-12">
                                    <strong>Confira a pontuação para baixar os trechos</strong>
                                </div>
                            </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" ng-click="ok();">Confirmar</button>
                            <button type="button" class="btn btn-warning" ng-click="cancel();">Cancelar</button>
                        </div>
                        </script>
                        <button type="button" ng-show="isValidOrder();" ng-click="open();" class="btn btn-line-info">confirmar</button>
                    </div>
                    <!-- <button type="button" ng-show="isValidOrder();" ng-click="saveOrder();" class="btn btn-line-info">confirmar</button> -->
                </div>
                <!-- <button type="button" ng-show="isValidOrder();" ng-click="sendEmail();" class="btn btn-line-info">Confirmar e enviar Email</button> -->
            </div>
        </div>
        </div>
    </section>

    <section class="panel panel-default mail-container mail-compose" ng-show="tabindex == 5" nv-file-drop="" uploader="uploader"
        filters="queueLimit, customFilter">
        <div class="panel-heading">
            <strong>Escrever Email</strong>
        </div>
        <div class="panel-body">
            <form class="form-horizontal">
                <!-- <div class="form-group" ng-show="airlines.length > 1">
                    <label for="" class="col-sm-2">Companhia</label>
                    <div class="col-sm-10">
                        <input type="text" id='emailAirline' ng-model="selectedCompany" typeahead="air.airline for air in airlines | filter:$viewValue | limitTo:8" ng-change="filteredEmail()" class="form-control" placeholder="Companhia Aérea">
                    </div>
                </div> -->
                <div class="form-group">
                    <label for="mail_to" class="col-xs-2">Para:</label>
                    <div class="col-xs-10">
                        <input type="text" ng-model="wsalemail.emailpartner" id="mail_to" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="mail_cc" class="col-xs-2">CC:</label>
                    <div class="col-xs-10">
                        <input type="text" id="mail_cc" ng-model="wsalemail.mailcc" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="mail_subject" class="col-xs-2">Assunto:</label>
                    <div class="col-xs-10">
                        <input type="text" id="mail_subject" ng-model="wsalemail.subject" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-4">
                        <table class="table">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Progresso</td>
                                    <td>Ações</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in uploader.queue">
                                    <td>
                                        <strong>{{ item.file.name }}</strong>
                                    </td>
                                    <td ng-show="uploader.isHTML5">
                                        <div class="progress" style="margin-bottom: 0;">
                                            <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                        </div>
                                    </td>
                                    <td nowrap>
                                        <button type="button" class="btn btn-success btn-xs" ng-click="item.upload(); loadFiles();" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                            <span class="glyphicon glyphicon-upload"></span> Upload
                                        </button>
                                        <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                            <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                                        </button>
                                        <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                            <span class="glyphicon glyphicon-trash"></span> Remove
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <input type="file" nv-file-select="" uploader="uploader" multiple />
                <br/>
                <div class="well my-drop-zone" nv-file-over="" uploader="uploader">
                    Arraste e solte
                </div>
                <div text-angular ng-model="wsalemail.emailContent" ng-class="ui-editor">
                </div>
            </form>
            <div class="mail-actions">
                <div class="text-left col-sm-6">
                    <button type="button" class="btn btn-warning" ng-click="undo();">cancelar</button>
                </div>
                <div class="text-right col-sm-6">
                    <button type="button" ng-click="mailOrder();" class="btn btn-sm btn-primary">enviar</button>
                </div>
            </div>
        </div>
    </section>

    <section class="panel panel-default table-dynamic" ng-show="tabindex == 6">
        <div class="panel-heading">
            <strong>Liberação comercial</strong> - Milhas Filtradas: {{findMilesOrder();}}</div>

        <div class="table-filters">
            <div class="row">
                <form>
                    <div class="form-group">
                        <div class="col-sm-5">
                            <input type="text" placeholder="Pesquisar..." class="form-control" data-ng-model="searchKeywords" data-ng-keyup="search()">
                        </div>
                        <div class="col-sm-2" data-ng-controller="OnlineModalPermissionCtrl">
                            <script type="text/ng-template" id="OnlineModalPermissionCtrl.html">
                                <div class="modal-header">
                                    <h3>Autorização de OP</h3>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="form-group">
                                            <label for="" class="col-sm-4">PIN</label>
                                            <div class="col-sm-4">
                                            <input type="password" class="form-control" ng-model="permissions.pinCode">
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="!permissions.type">
                                            <div class="col-sm-4">
                                            <button type="button" class="btn btn-primary" ng-click="check();">Confirmar</button>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="permissions.type == 'Comercial'">
                                            <div class="col-sm-4">
                                                <button type="button" class="btn btn-primary" ng-click="checkCommercial();">Confirmar Comercial</button>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="permissions.type == 'Comercial'">
                                            <label for="" class="col-sm-12">Liberação Faturado</label>
                                        </div>
                                        <div class="form-group" ng-if="permissions.type == 'Comercial'">
                                            <label for="" class="col-sm-4">Dias para pagamento</label>
                                            <div class="col-sm-4">
                                                <input type="password" class="form-control" ng-model="permissions.days">
                                            </div>
                                            <div class="col-sm-4">
                                                <button type="button" class="btn btn-primary" ng-click="checkCommercialFaturado();">Confirmar Faturado</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-warning" ng-click="cancel();">Cancel</button>
                                    <button type="button" class="btn btn-info" ng-click="email();">Enviar Email</button>
                                    <button type="button" class="btn btn-info" ng-click="emailCommecial();" ng-show="response.partner_limit == 'true' ">Email p/ Comercial</button>
                                </div>
                            </script>
                        </div>
                        <div class="col-sm-5">
                            <h4>Clique na OP que deseja fazer a liberação</h4>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <table class="table table-bordered table-responsive">
            <thead>
                <tr>
                    <th>
                        <div class="th">
                            ID
                            <span class="fa fa-angle-up" data-ng-click="order('id') " data-ng-class="{active: row == 'id'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-id') " data-ng-class="{active: row == '-id'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Cliente
                            <span class="fa fa-angle-up" data-ng-click="order('client_name') " data-ng-class="{active: row == 'client_name'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-client_name') " data-ng-class="{active: row == '-client_name'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Status
                            <span class="fa fa-angle-up" data-ng-click="order('status') " data-ng-class="{active: row == 'status'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-status') " data-ng-class="{active: row == '-status'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Companhia
                            <span class="fa fa-angle-up" data-ng-click="order('airline') " data-ng-class="{active: row == 'airline'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-airline') " data-ng-class="{active: row == '-airline'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Criando em
                            <span class="fa fa-angle-up" data-ng-click="order('created_at') " data-ng-class="{active: row == 'created_at'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-created_at') " data-ng-class="{active: row == '-created_at'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Embarques
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Total Milhas
                            <span class="fa fa-angle-up" data-ng-click="order('miles_used') " data-ng-class="{active: row == 'miles_used'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-miles_used') " data-ng-class="{active: row == '-miles_used'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Valor total
                            <span class="fa fa-angle-up" data-ng-click="order('total_cost') " data-ng-class="{active: row == 'total_cost'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-total_cost') " data-ng-class="{active: row == '-total_cost'}"></span>
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Taxas
                        </div>
                    </th>
                    <th>
                        <div class="th">
                            Observações
                            <span class="fa fa-angle-up" data-ng-click="order('comments') " data-ng-class="{active: row == 'comments'}"></span>
                            <span class="fa fa-angle-down" data-ng-click="order('-comments') " data-ng-class="{active: row == '-comments'}"></span>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="onlineorder in onlineorders" bgcolor='{{findColor(onlineorder);}}' class="draggable">
                    <td ng-click="setSelected(); $event.stopPropagation();">{{onlineorder.id}}</td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        {{onlineorder.client_name}}
                        <label class="label label-purple right" ng-if="isFlightToday(onlineorder)">Voo Hoje</label>
                        <label class="label label-purple right" ng-if="!isFlightToday(onlineorder) && isFlightTomorrow(onlineorder)">Voo Amanha</label>
                        <br><b>{{onlineorder.userSession}}</b>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        <div>
                            <span class="{{orderTagClient(onlineorder)}}">{{getStatusOrder(onlineorder)}} </span></div>                        
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">{{onlineorder.airline}}</td>
                    <td ng-click="setSelected(); $event.stopPropagation();">{{findDate(onlineorder.created_at) | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        <div ng-repeat="boarding in onlineorder.boardings">
                            {{findDate(boarding) | date:'dd/MM/yyyy HH:mm:ss'}}
                            <br>
                        </div>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        <div class="text-right">{{formatNumber(onlineorder.miles_used,0)}}</div>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        <div class="text-right">{{formatNumber(onlineorder.total_cost)}}</div></td>
                    <td ng-click="setSelected(); $event.stopPropagation();">
                        <div ng-repeat="tax in onlineorder.tax">
                            {{formatNumber(tax)}}
                            <br>
                        </div>
                    </td>
                    <td ng-click="setSelected(); $event.stopPropagation();">{{onlineorder.comments}}</td>
                </tr>
            </tbody>
        </table>

        <footer class="table-footer">
            <div class="row">
                <div class="col-md-4 page-num-info">
                    <span>
                        Show
                        <select data-ng-model="numPerPage" data-ng-options="num for num in numPerPageOpt" data-ng-change="onNumPerPageChange()">
                        </select>
                        entries per page
                    </span>
                </div>
                <div class="col-md-4 text-right pagination-container">
                    <pagination class="pagination-sm" ng-model="currentPage" total-items="filteredOnlineOrders.length" max-size="4" ng-change="select(currentPage)"
                        items-per-page="numPerPage" rotate="false" previous-text="&lsaquo;" next-text="&rsaquo;" boundary-links="true"></pagination>
                </div>
                <div class="col-md-4 text-right page-num-info">
                    <span>
                        Showing {{filteredOnlineOrders.length}}/{{onlineorder.length}} entries
                    </span>
                </div>
            </div>
        </footer>
    </section>

    <section class="panel panel-default table-dynamic" ng-show="tabindex == 99">
        <div class="panel-heading">
            <strong>Pedidos Online </strong>
        </div>

        <div class="table-filters">
            <div class="row">
                <form>
                    <div class="form-group">
                        <!-- <div class="col-sm-6">
                            <input type="text" placeholder="Pesquisar..." class="form-control" data-ng-model="searchKeywords" data-ng-keyup="search()">
                        </div>
                        <div class="col-sm-2">Atualização Automatica
                            <label class="switch">
                                <input type="checkbox" ng-model="atualizations" ng-checked="atualizations">
                                <i></i>
                            </label>
                        </div> -->
                    </div>
                </form>
            </div>
        </div>

        <table class="table table-bordered table-striped table-responsive">
            <thead>
                <tr>
                    <th>
                        <div class="th">Login</div>
                    </th>
                    <th>
                        <div class="th">Status</div>
                    </th>
                    <th>
                        <div class="th">Companhia</div>
                    </th>
                    <th>
                        <div class="th">Criando em</div>
                    </th>
                    <th>
                        <div class="th">Total Milhas</div>
                    </th>
                    <th>
                        <div class="th">Valor total</div>
                    </th>
                    <th>
                        <div class="th">Observações</div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="onlineorder in onlineorders">
                    <td>
                        {{onlineorder.client_name}}
                        <label class="label label-purple right" ng-if="isFlightToday(onlineorder)">Voo Hoje</label>
                        <label class="label label-purple right" ng-if="!isFlightToday(onlineorder) && isFlightTomorrow(onlineorder)">Voo Amanha</label>
                    </td>
                    <td>
                        <div>
                            <span class="{{orderTag(onlineorder.status)}}">{{getStatusOrder(onlineorder)}}</div>
                        </span>
                    </td>
                    <td>{{onlineorder.airline}}</td>
                    <td>{{findDate(onlineorder.created_at) | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                    <td>
                        <div class="text-right">{{formatNumber(onlineorder.miles_used,0)}}</div>
                    </td>
                    <td>
                        <div class="text-right">{{formatNumber(onlineorder.total_cost)}}</td>
                    <td>{{onlineorder.comments}}</td>
                </tr>
            </tbody>
        </table>
    </section>
</div>
